"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[376],{7376:(Yt,N,r)=>{r.r(N),r.d(N,{default:()=>Ft});var f=r(4755),w=r(877),g=r(1728),_=r(430),C=r(5707),x=r(6702),v=r(2611),m=r(3627),Z=r(9609),u=r(9114),h=r(7406),s=r(9401),p=r(6286),M=r(787),Q=r(1274),D=r(3231),q=r(8995),t=r(2223),y=r(1217);let k=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[y.BQ,y.BQ]})}return e})();var F=r(7361),I=r(5191),Y=r(9158),j=r(4250),J=r(9502),P=r(4004),S=r(3144);let R=(()=>{class e{constructor(o){this.http=o}findCity(o){const l=J.O.apiUrl+"/cargo/find-city",n=JSON.stringify({query:o});return this.http.post(l,n).pipe((0,P.U)(a=>a.success?a.data.suggestions:[]))}getCities(o,l){return this.http.get(J.O.apiUrl+"/references/cities?city="+o+"&lang="+l)}static#t=this.\u0275fac=function(l){return new(l||e)(t.LFG(S.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var O=r(3648),U=r(8501),B=r(4973);function H(e,i){1&e&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"add_user")))}function E(e,i){1&e&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"edit_user")))}function z(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function K(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function W(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f 6 "),t.qZA())}function $(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u042d\u0442\u043e \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b \u0438 \u0447\u0438\u0441\u043b\u043e "),t.qZA())}const b=function(e){return{"is-invalid":e}};function G(e,i){if(1&e&&(t.TgZ(0,"div",29)(1,"mat-form-field",7)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",30),t.YNc(6,K,3,3,"mat-error",9),t.YNc(7,W,2,0,"mat-error",9),t.YNc(8,$,2,0,"mat-error",9),t.qZA()()),2&e){const o=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"password")),t.xp6(2),t.Q6J("ngClass",t.VKq(7,b,o.f.password.errors)),t.xp6(1),t.Q6J("ngIf",null==o.f.password.errors?null:o.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",null==o.f.password.errors?null:o.f.password.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==o.f.password.errors?null:o.f.password.errors.pattern)}}function V(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function X(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function tt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_email")," "))}function et(e,i){if(1&e&&t._UZ(0,"img",31),2&e){const o=t.oxw();t.Q6J("src",o.passport,t.LSH)}}function ot(e,i){if(1&e&&(t._UZ(0,"img",31),t.ALo(1,"async"),t.ALo(2,"fileFetch")),2&e){const o=t.oxw();t.Q6J("src",t.lcZ(1,1,t.xi3(2,3,o.passport,"client")),t.LSH)}}const nt=function(){return["uz"]},lt=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button dark":i}};let L=(()=>{class e{constructor(o,l,n,a,c,A){this.data=o,this.countryService=l,this._toaster=n,this._clientService=a,this._cdr=c,this._dialog=A,this.findList=[],this.file=null,this.viewText=!1,this.passport=null,this.formData=new FormData,this.citiesSelected=new s.NI,this.selectTechnicalRoomFilterCtrl=new s.NI,this.roles=[],this.edit=!1,this.form=new s.cw({id:new s.NI(""),firstName:new s.NI("",[s.kI.required]),lastName:new s.NI("",[s.kI.required]),email:new s.NI("",[s.kI.required,s.kI.email]),phoneNumber:new s.NI("",[s.kI.required]),password:new s.NI("",this.edit?null:[s.kI.required,s.kI.maxLength(16),s.kI.minLength(8),s.kI.pattern("^[a-zA-Z0-9]+$")]),passport:new s.NI("",this.edit?null:[s.kI.required])}),this.data&&(this.edit=!0,this._clientService.get(this.data.id).subscribe(d=>{this.edit=!0,this.passport=d.data?.passportFilePath,this.form.patchValue({id:d.data?.id,firstName:d.data?.firstName,lastName:d.data?.lastName,phoneNumber:d.data?.phoneNumbers[0].phoneNumber,email:d.data?.email,passport:d.data?.passportFilePath})}))}findCity(o){try{const l=o.target.value.toString().trim().toLowerCase();l.length>=2?(this.viewText=!0,this.countryService.findCity(l).subscribe(n=>{this.findList=n})):(this.viewText=!1,this.findList=[])}catch(l){console.error("Error fetching city data:",l)}}onPassportSelected(o){const l=o.target;if(l.files&&l.files.length>0){const n=l.files[0],a=o.target.files[0];a&&(this.file=a),this.fileName=n.name;const c=new File([n],n.name,{type:n.type});this.form.get("passport").setValue(c)}}selectFile(o,l){const n=o.target.files[0];if(n){this.formData.append(l,n,(new Date).getTime().toString()+".jpg");const a=new FileReader;a.onload=()=>{this[l]=a.result,this._cdr.detectChanges()},a.readAsDataURL(n)}}get f(){return this.form.controls}submit(){if(this.form.valid)if(this.form.value.id)this.form.patchValue({phoneNumbers:[this.form.get("phoneNumber").value]}),this._clientService.update(this.form.value).pipe(o=>((0,I.b)(o),o)).subscribe(o=>{o.success?(this._dialog.closeAll(),this._toaster.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")});else{this.formData.append("password",this.form.get("password").value),this.formData.append("id",this.form.get("id").value),this.formData.append("firstName",this.form.get("firstName").value),this.formData.append("lastName",this.form.get("lastName").value),this.formData.append("phoneNumbers",JSON.stringify([this.form.get("phoneNumber").value])),this.formData.append("email",this.form.get("email").value);const o=(0,Y.l)(this.formData);this._clientService.create(o).pipe(l=>((0,I.b)(l),l)).subscribe(l=>{l.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c")})}else this._dialog.open(j.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(l){return new(l||e)(t.Y36(p.WI),t.Y36(R),t.Y36(O._W),t.Y36(U.y),t.Y36(t.sBO),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-client"]],standalone:!0,features:[t.jDz],decls:58,vars:55,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","","class","font-bold text-2xl uppercase",4,"ngIf"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],[1,"grid","grid-cols-2","gap-4"],[1,"p-3"],["color","accent",1,"w-full"],["matInput","","formControlName","firstName",3,"ngClass"],[4,"ngIf"],["tyle","border: 2px solid red; padding: 10px; margin-left: 100px;width: 100px; height: 100px;","formControlName","phoneNumber","name","phoneNumber",3,"cssClass","preferredCountries","enablePlaceholder","enableSearch"],["phoneNumber",""],["class","w-full flex",4,"ngIf"],["matInput","","formControlName","lastName",3,"ngClass"],["matInput","","formControlName","email",3,"ngClass"],[1,"w-32"],[1,"font-bold"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10","rounded-md"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["formControlName","passport","id","avatar-file-input1","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","avatar-file-input1","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["class","object-fill w-full h-full",3,"src",4,"ngIf"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],[1,"w-full","flex"],["matInput","","formControlName","password",3,"ngClass"],[1,"object-fill","w-full","h-full",3,"src"]],template:function(l,n){1&l&&(t.TgZ(0,"div",0),t.YNc(1,H,3,3,"p",1),t.YNc(2,E,3,3,"p",1),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-dialog-content")(7,"form",4)(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t._UZ(14,"input",8),t.YNc(15,z,3,3,"mat-error",9),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"ngx-mat-intl-tel-input",10,11),t.qZA(),t.YNc(22,G,9,9,"div",12),t.qZA(),t.TgZ(23,"div",6)(24,"mat-form-field",7)(25,"mat-label"),t._uU(26),t.ALo(27,"transloco"),t.qZA(),t._UZ(28,"input",13),t.YNc(29,V,3,3,"mat-error",9),t.qZA(),t.TgZ(30,"mat-form-field",7)(31,"mat-label"),t._uU(32),t.ALo(33,"transloco"),t.qZA(),t._UZ(34,"input",14),t.YNc(35,X,3,3,"mat-error",9),t.YNc(36,tt,3,3,"mat-error",9),t.qZA(),t.TgZ(37,"div",15)(38,"mat-label",16),t._uU(39),t.ALo(40,"transloco"),t.qZA(),t.TgZ(41,"div",17),t._UZ(42,"div",18),t.TgZ(43,"div",19)(44,"div")(45,"input",20),t.NdJ("change",function(c){return n.selectFile(c,"passport")}),t.qZA(),t.TgZ(46,"label",21),t._UZ(47,"mat-icon",22),t.qZA()()(),t.YNc(48,et,1,1,"img",23),t.YNc(49,ot,3,6,"img",23),t.qZA()()()()()(),t.TgZ(50,"mat-dialog-actions",24)(51,"div",25)(52,"button",26),t._uU(53),t.ALo(54,"transloco"),t.qZA(),t.TgZ(55,"button",27),t.NdJ("click",function(){return n.submit()}),t._uU(56),t.ALo(57,"transloco"),t.qZA()()()),2&l&&(t.xp6(1),t.Q6J("ngIf",!n.edit),t.xp6(1),t.Q6J("ngIf",n.edit),t.xp6(5),t.Q6J("formGroup",n.form),t.xp6(5),t.Oqu(t.lcZ(13,31,"first_name")),t.xp6(2),t.Q6J("ngClass",t.VKq(45,b,n.f.firstName.errors)),t.xp6(1),t.Q6J("ngIf",null==n.f.firstName.errors?null:n.f.firstName.errors.required),t.xp6(3),t.hij("",t.lcZ(19,33,"phone"),"*"),t.xp6(2),t.Q6J("cssClass","custom")("preferredCountries",t.DdM(47,nt))("enablePlaceholder",!0)("enableSearch",!0),t.xp6(2),t.Q6J("ngIf",!n.edit),t.xp6(4),t.Oqu(t.lcZ(27,35,"last_name")),t.xp6(2),t.Q6J("ngClass",t.VKq(48,b,n.f.lastName.errors)),t.xp6(1),t.Q6J("ngIf",null==n.f.lastName.errors?null:n.f.lastName.errors.required),t.xp6(3),t.Oqu(t.lcZ(33,37,"email")),t.xp6(2),t.Q6J("ngClass",t.VKq(50,b,n.f.email.errors)),t.xp6(1),t.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==n.f.email.errors?null:n.f.email.errors.email),t.xp6(3),t.Oqu(t.lcZ(40,39,"passport")),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",n.passport&&!n.edit),t.xp6(1),t.Q6J("ngIf",n.passport&&n.edit),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(54,41,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(52,lt,n.form.invalid,!n.form.invalid))("color","primary")("disabled",n.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(57,43,"save")," "))},dependencies:[C.y4,C.Ot,F.d,B.z,f.Ov,D.Co,k,q.Bb,Q.d,Z.c,Z.Nt,u.KE,u.hX,u.TO,_.Ps,_.Hw,M.LD,g.ot,g.lW,g.RK,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.Is,p.ZT,p.uh,p.xY,p.H8,s.u5,f.O5,m.p0,f.mk,u.lN,v.JX,x.TU,h.Tx,w.rP],encapsulation:2,changeDetection:0})}return e})();var it=r(7177),at=r(1983),rt=r(4077),st=r(8885),T=r(8280),ct=r(6530),mt=r(3045);function dt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.add())}),t._UZ(1,"mat-icon",39),t.TgZ(2,"span",40),t._uU(3),t.ALo(4,"transloco"),t.qZA()()}2&e&&(t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus"),t.xp6(2),t.Oqu(t.lcZ(4,3,"add")))}function pt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1," No "),t.qZA())}function ut(e,i){if(1&e&&(t.TgZ(0,"mat-cell",42),t._uU(1),t.qZA()),2&e){const o=i.index;t.xp6(1),t.hij(" ",o+1," ")}}function ft(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1," ID "),t.qZA())}function gt(e,i){if(1&e&&(t.TgZ(0,"mat-cell",42),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.id," ")}}function ht(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"full_name")," "))}function _t(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.AsE(" ",null==o?null:o.firstName," ",null==o?null:o.lastName," ")}}function Ct(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"phone")," "))}function xt(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.phoneNumber," ")}}function Zt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,xt,2,1,"span",43),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Q6J("ngForOf",o.phoneNumbers)}}function bt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"register_date")," "))}function Tt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==o?null:o.createdAt,"dd/MM/yyyy")," ")}}function At(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"last_enter")," "))}function vt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",null==o?null:o.last_inter," ")}}function Nt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",41),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"status")," "))}function wt(e,i){1&e&&t._UZ(0,"button",46)}function Mt(e,i){1&e&&t._UZ(0,"button",47)}function yt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,wt,1,0,"button",44),t.YNc(2,Mt,1,0,"button",45),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=o&&o.blocked)),t.xp6(1),t.Q6J("ngIf",null==o?null:o.blocked)}}function It(e,i){1&e&&t._UZ(0,"mat-header-cell")}function Jt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.block(n.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"lock"),t.qZA(),t._uU(3),t.ALo(4,"transloco"),t.qZA()}2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"block")," "))}function Ut(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(o);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.active(n.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"lock_open"),t.qZA(),t._uU(3),t.ALo(4,"transloco"),t.qZA()}2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"unblock")," "))}function Lt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"mat-cell")(1,"div",48)(2,"button",49),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,50)(7,"button",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.edit(a))}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t._uU(10),t.ALo(11,"transloco"),t.qZA(),t.TgZ(12,"button",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.detail(a.id))}),t.TgZ(13,"mat-icon"),t._uU(14,"remove_red_eye"),t.qZA(),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.YNc(17,Jt,5,3,"button",52),t.YNc(18,Ut,5,3,"button",52),t.TgZ(19,"button",53),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.delete(a.id))}),t.TgZ(20,"mat-icon"),t._uU(21,"remove"),t.qZA(),t._uU(22),t.ALo(23,"transloco"),t.qZA()()()()}if(2&e){const o=i.$implicit,l=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",l),t.xp6(8),t.hij(" ",t.lcZ(11,6,"edit")," "),t.xp6(5),t.hij(" ",t.lcZ(16,8,"detail")," "),t.xp6(2),t.Q6J("ngIf",!o.blocked),t.xp6(1),t.Q6J("ngIf",o.blocked),t.xp6(4),t.hij(" ",t.lcZ(23,10,"delete")," ")}}function Qt(e,i){1&e&&t._UZ(0,"mat-header-row")}function Dt(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"mat-row",54),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw();return t.KtG(c.detail(a.id))}),t.qZA()}}function qt(e,i){1&e&&t._UZ(0,"app-no-data-placeholder",55)}const kt=function(){return[10,20,50,100,200]},Ft=[{path:"",component:(()=>{class e{constructor(o,l,n,a){this._clientService=o,this.utilsService=l,this._permissionService=n,this._dialog=a,this.cities=[],this.filters={clientId:"",firstName:"",phoneNumber:"",createdAtFrom:"",createdAtTo:"",lastLoginFrom:"",lastLoginTo:""},this.pageParams={page:0,limit:10,totalPagesCount:1,sortBy:"id",sortType:"desc"},this.displayedColumns=["index","id","full_name","phone","register_date","last_enter","status","actions"],this.dataSource=new m.by([]),this.getAllClient(this.pageParams)}getAllClient(o){this._clientService.getAll(Object.assign(this.filters,o)).subscribe(l=>{this.dataSource.data=l?.data?.content,this.pageParams.limit=l?.data?.per_page,this.pageParams.page=l?.data?.pageIndex,this.pageParams.totalPagesCount=l?.data?.totalPagesCount})}hasPermission(o){return this.utilsService.hasPermission(o)}clearFilters(){this.filters={clientId:"",firstName:"",phoneNumber:"",createdAtFrom:"",createdAtTo:"",lastLoginFrom:"",lastLoginTo:""},this.getAllClient(this.pageParams)}filterClients(){}onPageChange(o){this.pageParams.limit=o.pageSize,this.pageParams.page=o.pageIndex,this.getAllClient(this.pageParams)}send(){this._dialog.open(rt.Z,{minWidth:"25vw",maxWidth:"35vw",minHeight:"35vh",maxHeight:"60vh",autoFocus:!1})}detail(o){this._dialog.open(it.$,{width:"500px",height:"100vh",autoFocus:!1,data:o,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(()=>{this.getAllClient(this.pageParams)})}block(o){this._dialog.open(st.F,{minWidth:"20vw",maxWidth:"40vw",minHeight:"42vh",maxHeight:"85vh",data:o,autoFocus:!1}).afterClosed().subscribe(()=>{this.getAllClient(this.pageParams)})}active(o){this._clientService.active(o).subscribe(()=>{this.getAllClient(this.pageParams)})}add(){this._dialog.open(L,{minWidth:"40vw",maxWidth:"50vw",minHeight:"42vh",maxHeight:"85vh",autoFocus:!1}).afterClosed().subscribe(()=>{this.getAllClient(this.pageParams)})}edit(o){this._dialog.open(L,{minWidth:"40vw",maxWidth:"50vw",minHeight:"42vh",maxHeight:"85vh",autoFocus:!1,data:o}).afterClosed().subscribe(()=>{this.getAllClient(this.pageParams)})}delete(o){this._clientService.delete(o).subscribe(()=>{this.getAllClient(this.pageParams)})}static#t=this.\u0275fac=function(l){return new(l||e)(t.Y36(U.y),t.Y36(ct.I),t.Y36(mt.YI),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-clients"]],viewQuery:function(l,n){if(1&l&&t.Gf(x.NW,5),2&l){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first)}},standalone:!0,features:[t.jDz],decls:85,vars:60,consts:[[1,"flex","flex-col","flex-auto"],[1,"flex-auto"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"sm:inline-flex","ml-3",3,"color","click"],["class","hidden sm:inline-flex ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"flex","items-baseline","flex-wrap"],["color","accent",1,"w-50","px-1"],["matInput","","name","id",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","name",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","phone",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","placeholder","ngModelChange"],["matIconSuffix","",3,"for"],["picker1",""],["picker",""],["picker2",""],["picker3",""],[1,"px-1"],["mat-flat-button","","color","warn",3,"click"],[1,"mt-4","shadow-table"],["matSort","",3,"dataSource"],["matColumnDef","index"],["class","font-bold",4,"matHeaderCellDef"],["class","index-column",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","full_name"],[4,"matCellDef"],["matColumnDef","phone"],["matColumnDef","register_date"],["matColumnDef","last_enter"],["matColumnDef","status"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[3,"click",4,"matRowDef","matRowDefColumns"],["class","m-1",4,"ngIf"],[3,"showFirstLastButtons","length","pageSize","pageIndex","pageSizeOptions","page"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"font-bold"],[1,"index-column"],[4,"ngFor","ngForOf"],["class","bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full",4,"ngIf"],["class","bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full",4,"ngIf"],[1,"bg-green-500","hover:bg-green-600","text-white","font-bold","py-2","px-4","rounded-full"],[1,"bg-red-500","hover:bg-red-600","text-white","font-bold","py-2","px-4","rounded-full"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"],["mat-menu-item","","color","accent",3,"click",4,"ngIf"],["mat-menu-item","","color","warn",3,"click"],[3,"click"],[1,"m-1"]],template:function(l,n){if(1&l&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5),t.ALo(6,"transloco"),t.qZA()(),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){return n.send()}),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"transloco"),t.qZA()(),t.YNc(12,dt,5,5,"button",6),t.qZA()(),t.TgZ(13,"div",7)(14,"mat-form-field",8)(15,"input",9),t.NdJ("ngModelChange",function(c){return n.filters.clientId=c}),t.ALo(16,"transloco"),t.qZA()(),t.TgZ(17,"mat-form-field",8)(18,"input",10),t.NdJ("ngModelChange",function(c){return n.filters.firstName=c}),t.ALo(19,"transloco"),t.qZA()(),t.TgZ(20,"mat-form-field",8)(21,"input",11),t.NdJ("ngModelChange",function(c){return n.filters.phoneNumber=c}),t.ALo(22,"transloco"),t.qZA()(),t.TgZ(23,"mat-form-field",8)(24,"input",12),t.NdJ("ngModelChange",function(c){return n.filters.createdAtFrom=c}),t.ALo(25,"transloco"),t.qZA(),t._UZ(26,"mat-datepicker-toggle",13)(27,"mat-datepicker",null,14),t.qZA(),t.TgZ(29,"mat-form-field",8)(30,"input",12),t.NdJ("ngModelChange",function(c){return n.filters.createdAtFrom=c}),t.ALo(31,"transloco"),t.qZA(),t._UZ(32,"mat-datepicker-toggle",13)(33,"mat-datepicker",null,15),t.qZA(),t.TgZ(35,"mat-form-field",8)(36,"input",12),t.NdJ("ngModelChange",function(c){return n.filters.lastLoginFrom=c}),t.ALo(37,"transloco"),t.qZA(),t._UZ(38,"mat-datepicker-toggle",13)(39,"mat-datepicker",null,16),t.qZA(),t.TgZ(41,"mat-form-field",8)(42,"input",12),t.NdJ("ngModelChange",function(c){return n.filters.lastLoginTo=c}),t.ALo(43,"transloco"),t.qZA(),t._UZ(44,"mat-datepicker-toggle",13)(45,"mat-datepicker",null,17),t.qZA(),t.TgZ(47,"div",18)(48,"button",19),t.NdJ("click",function(){return n.clearFilters()}),t._uU(49),t.ALo(50,"transloco"),t.qZA()(),t.TgZ(51,"div",18)(52,"button",19),t.NdJ("click",function(){return n.getAllClient()}),t._uU(53),t.ALo(54,"transloco"),t.qZA()()(),t.TgZ(55,"div",20)(56,"mat-table",21),t.ynx(57,22),t.YNc(58,pt,2,0,"mat-header-cell",23),t.YNc(59,ut,2,1,"mat-cell",24),t.BQk(),t.ynx(60,25),t.YNc(61,ft,2,0,"mat-header-cell",23),t.YNc(62,gt,2,1,"mat-cell",24),t.BQk(),t.ynx(63,26),t.YNc(64,ht,3,3,"mat-header-cell",23),t.YNc(65,_t,2,2,"mat-cell",27),t.BQk(),t.ynx(66,28),t.YNc(67,Ct,3,3,"mat-header-cell",23),t.YNc(68,Zt,2,1,"mat-cell",27),t.BQk(),t.ynx(69,29),t.YNc(70,bt,3,3,"mat-header-cell",23),t.YNc(71,Tt,3,4,"mat-cell",27),t.BQk(),t.ynx(72,30),t.YNc(73,At,3,3,"mat-header-cell",23),t.YNc(74,vt,2,1,"mat-cell",27),t.BQk(),t.ynx(75,31),t.YNc(76,Nt,3,3,"mat-header-cell",23),t.YNc(77,yt,3,2,"mat-cell",27),t.BQk(),t.ynx(78,32),t.YNc(79,It,1,0,"mat-header-cell",33),t.YNc(80,Lt,24,12,"mat-cell",27),t.BQk(),t.YNc(81,Qt,1,0,"mat-header-row",34),t.YNc(82,Dt,1,0,"mat-row",35),t.qZA(),t.YNc(83,qt,1,0,"app-no-data-placeholder",36),t.TgZ(84,"mat-paginator",37),t.NdJ("page",function(c){return n.onPageChange(c)}),t.qZA()()()()),2&l){const a=t.MAs(28),c=t.MAs(34),A=t.MAs(40),d=t.MAs(46);t.xp6(5),t.Oqu(t.lcZ(6,37,"clients")),t.xp6(3),t.Q6J("color","primary"),t.xp6(2),t.Oqu(t.lcZ(11,39,"send")),t.xp6(2),t.Q6J("ngIf",n.hasPermission("addClient")),t.xp6(3),t.s9C("placeholder",t.lcZ(16,41,"ID")),t.Q6J("ngModel",n.filters.clientId),t.xp6(3),t.s9C("placeholder",t.lcZ(19,43,"name")),t.Q6J("ngModel",n.filters.firstName),t.xp6(3),t.s9C("placeholder",t.lcZ(22,45,"phone")),t.Q6J("ngModel",n.filters.phoneNumber),t.xp6(3),t.s9C("placeholder",t.lcZ(25,47,"start_date_reg")),t.Q6J("matDatepicker",a)("ngModel",n.filters.createdAtFrom),t.xp6(2),t.Q6J("for",a),t.xp6(4),t.s9C("placeholder",t.lcZ(31,49,"end_date_reg")),t.Q6J("matDatepicker",c)("ngModel",n.filters.createdAtFrom),t.xp6(2),t.Q6J("for",c),t.xp6(4),t.s9C("placeholder",t.lcZ(37,51,"start_date_log")),t.Q6J("matDatepicker",A)("ngModel",n.filters.lastLoginFrom),t.xp6(2),t.Q6J("for",A),t.xp6(4),t.s9C("placeholder",t.lcZ(43,53,"end_date_log")),t.Q6J("matDatepicker",d)("ngModel",n.filters.lastLoginTo),t.xp6(2),t.Q6J("for",d),t.xp6(5),t.hij(" ",t.lcZ(50,55,"clear"),""),t.xp6(4),t.hij(" ",t.lcZ(54,57,"filter"),""),t.xp6(3),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("ngIf",!n.dataSource.data.length),t.xp6(1),t.Q6J("showFirstLastButtons",!0)("length",n.pageParams.totalPagesCount-1)("pageSize",n.pageParams.limit)("pageIndex",n.pageParams.page)("pageSizeOptions",t.DdM(59,kt))}},dependencies:[C.y4,C.Ot,_.Ps,_.Hw,f.uU,T.FA,T.Mq,T.hl,T.nW,s.u5,s.Fj,s.JJ,s.On,s.UX,at.o,M.LD,u.KE,u.R9,g.ot,g.lW,g.RK,f.ax,f.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,u.lN,Z.c,Z.Nt,v.JX,v.YE,x.TU,x.NW,h.Tx,h.VK,h.OP,h.p6,w.rP],encapsulation:2,changeDetection:0})}return e})(),resolve:{}}]}}]);