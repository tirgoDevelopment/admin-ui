"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[327],{4327:(y,b,s)=>{s.r(b),s.d(b,{default:()=>Ln});var A=s(4755),Z=s(877),h=s(1728),v=s(430),_=s(5707),f=s(6702),x=s(2611),m=s(3627),d=s(9609),c=s(9114),g=s(7406),D=s(6266),B=s(1983),r=s(9401),p=s(6286),C=s(787),M=s(1274),R=s(1951),k=s(5191),$=s(9158),L=s(4250),z=s(7361),t=s(2223),P=s(3648),O=s(2689),I=s(3144),Y=s(9502),G=s(8615);let w=(()=>{class e{constructor(n,o){this._apiService=n,this._http=o}get(n){let o=new I.LE;return o=o.append("id",n),this._apiService.get("/users/agents/agent-by",o)}getAll(n){return this._apiService.get("/users/agents",(0,O.$)(n))}getAllByAgent(n){return this._apiService.get("/users/drivers/by-agent",(0,O.$)(n))}getAgentTransactions(n){let o=new I.LE;return o=o.append("agentId",n),this._http.get(Y.O.merchantUrl+"/finance/transaction/agent-transactions",{params:o})}getAgentbalance(n){console.log(n);let o=new I.LE;return o=o.append("agentId",n),this._http.get(Y.O.merchantUrl+"/finance/transaction/agent-balance",{params:o})}block(n,o){let a=new I.LE;return a=a.append("id",n),this._apiService.patch("/users/agents/block-agent",o,a)}active(n){let o=new I.LE;return o=o.append("id",n),this._apiService.patch("/users/agents/activate-agent",{},o)}getAllDeleted(n){return this._apiService.get("/agents/deleted",(0,O.$)(n))}create(n){return this._apiService.post("/users/agents/register",n)}CreateBalanseAgent(n){return this._http.post(Y.O.merchantUrl+"/finance/transaction",n)}createsubscription(n){return this._apiService.post("/users/agents/add-subscription-driver",n)}connectToAgent(n){return this._apiService.post("/users/drivers/append-driver-to-agent",n)}update(n){return this._apiService.put("/users/agents/update",n)}delete(n){let o=new I.LE;return o=o.append("id",n),this._apiService.delete("/users/agents",o)}static#t=this.\u0275fac=function(o){return new(o||e)(t.LFG(G.s),t.LFG(I.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var F=s(2621),X=s(3817),W=s(1217),V=s(4973);function tt(e,i){1&e&&(t.TgZ(0,"p",42),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"add_agent")))}function et(e,i){1&e&&(t.TgZ(0,"p",42),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"edit_agent")))}function nt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function at(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function ot(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0434\u043b\u0438\u043d\u0430 \u043f\u043e\u043b\u044f 6 "),t.qZA())}function it(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u042d\u0442\u043e \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0441\u0438\u043c\u0432\u043e\u043b \u0438 \u0447\u0438\u0441\u043b\u043e "),t.qZA())}function rt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function lt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function st(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function ct(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function mt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function ut(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function pt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function dt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function gt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function _t(e,i){if(1&e&&(t.TgZ(0,"mat-option",48),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function ft(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-form-field",43)(1,"mat-label"),t._uU(2,"Bank Account"),t.qZA(),t._UZ(3,"input",44),t.TgZ(4,"mat-select",45),t.YNc(5,_t,2,2,"mat-option",46),t.qZA(),t.TgZ(6,"button",47),t.NdJ("click",function(){const l=t.CHM(n).index,u=t.oxw();return t.KtG(u.removeItem(l))}),t._uU(7,"Remove"),t.qZA()()}if(2&e){const n=i.index,o=t.oxw();t.Q6J("formGroupName",n),t.xp6(5),t.Q6J("ngForOf",o.currencies),t.xp6(1),t.Q6J("color","warn")}}function ht(e,i){if(1&e&&t._UZ(0,"img",49),2&e){const n=t.oxw();t.Q6J("src",n.registrationCertificateFilePath,t.LSH)}}function At(e,i){if(1&e&&(t._UZ(0,"img",49),t.ALo(1,"async"),t.ALo(2,"fileFetch")),2&e){const n=t.oxw();t.Q6J("src",t.lcZ(1,1,t.xi3(2,3,n.registrationCertificateFilePath,"agent")),t.LSH)}}function vt(e,i){if(1&e&&t._UZ(0,"img",49),2&e){const n=t.oxw();t.Q6J("src",n.managerPassportFilePath,t.LSH)}}function Zt(e,i){if(1&e&&(t._UZ(0,"img",49),t.ALo(1,"async"),t.ALo(2,"fileFetch")),2&e){const n=t.oxw();t.Q6J("src",t.lcZ(1,1,t.xi3(2,3,n.managerPassportFilePath,"agent")),t.LSH)}}const q=function(e){return{"is-invalid":e}},xt=function(){return["uz"]},bt=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button ":i}};let H=(()=>{class e{constructor(n,o,a,l,u,T,E,Pn){this.fb=n,this.data=o,this._toaster=a,this._agentService=l,this._typeService=u,this._cdr=T,this._dialog=E,this.fileService=Pn,this.edit=!1,this.passwordGenerator=new R.E,this.formData=new FormData,this.form=new r.cw({id:new r.NI(""),username:new r.NI("",[r.kI.required]),password:new r.NI("",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(16),r.kI.pattern("^[a-zA-Z0-9]+$")]),companyName:new r.NI("",[r.kI.required]),legalAddress:new r.NI("",[r.kI.required]),physicalAddress:new r.NI("",[r.kI.required]),managerFirstName:new r.NI("",[r.kI.required]),managerLastName:new r.NI("",[r.kI.required]),inn:new r.NI("",[r.kI.required]),oked:new r.NI("",[r.kI.required]),mfo:new r.NI("",[r.kI.required]),bankAccounts:new r.Oe([]),bankBranchName:new r.NI("",[r.kI.required]),registrationCertificateFilePath:new r.NI("",[r.kI.required]),managerPassportFilePath:new r.NI("",[r.kI.required]),phoneNumber:new r.NI("",[r.kI.required])}),this._typeService.getCurrencies().subscribe(Fn=>{this.currencies=Fn.data}),this.data&&(this.edit=!0,console.log(this.data),this.getAgentById(this.data.id)),this.addItem()}getAgentById(n){this._agentService.get(n).subscribe(o=>{this.registrationCertificateFilePath=o.data.registrationCertificateFilePath,this.managerPassportFilePath=o.data.managerPassportFilePath,o.success&&this.form.patchValue({id:o.data.id,username:o.data.username,phoneNumber:o.data.phoneNumber,companyName:o.data.companyName,legalAddress:o.data.legalAddress,physicalAddress:o.data.physicalAddress,managerFirstName:o.data.managerFirstName,managerLastName:o.data.managerLastName,inn:o.data.inn,oked:o.data.oked,mfo:o.data.mfo,bankBranchName:o.data.bankBranchName,bankAccounts:o.data.bankAccounts,registrationCertificateFilePath:o.data.registrationCertificateFilePath,managerPassportFilePath:o.data.managerPassportFilePath})})}selectFile(n,o){const a=n.target.files[0];if(a){this.formData.append(o,a,(new Date).getTime().toString()+".jpg");const l=new FileReader;l.onload=()=>{this[o]=l.result,this._cdr.detectChanges()},l.readAsDataURL(a)}}getImageUrl(n){const o=this.form.get(`${n}`).value;return o instanceof File?URL.createObjectURL(o):""}get itemsFormArray(){return this.form.get("bankAccounts")}addItem(){this.itemsFormArray.push(this.createItem())}createItem(){return this.fb.group({currencyId:["",r.kI.required],account:["",r.kI.required]})}removeItem(n){this.itemsFormArray.removeAt(n)}onFileSelected(n,o){const a=n.target.files[0];switch(o){case"registrationCertificateFilePath":this.form.patchValue({registrationCertificateFilePath:a});case"managerPassportFilePath":this.form.patchValue({managerPassportFilePath:a})}}get f(){return this.form.controls}submit(){this.formData.append("id",this.form.get("id").value),this.formData.append("username",this.form.get("username").value),this.formData.append("companyName",this.form.get("companyName").value),this.formData.append("password",this.form.get("password").value),this.formData.append("bankAccounts",JSON.stringify(this.form.get("bankAccounts").value)),this.formData.append("legalAddress",this.form.get("legalAddress").value),this.formData.append("physicalAddress",this.form.get("physicalAddress").value),this.formData.append("managerFirstName",this.form.get("managerFirstName").value),this.formData.append("managerLastName",this.form.get("managerLastName").value),this.formData.append("inn",this.form.get("inn").value),this.formData.append("oked",this.form.get("oked").value),this.formData.append("mfo",this.form.get("mfo").value),this.formData.append("bankBranchName",this.form.get("bankBranchName").value),this.formData.append("phoneNumber",this.form.get("phoneNumber").value),"string"==typeof this.form.get("registrationCertificateFilePath")?.value&&this.formData.append("registrationCertificateFilePath",this.form.get("registrationCertificateFilePath")?.value),"string"==typeof this.form.get("managerPassportFilePath")?.value&&this.formData.append("managerPassportFilePath",this.form.get("managerPassportFilePath")?.value);const n=(0,$.l)(this.formData);this.form.valid?this.form.value.id?this._agentService.update(this.form.value).pipe(o=>((0,k.b)(o),o)).subscribe(o=>{o.success?(this._dialog.closeAll(),this._toaster.success("\u0410\u0433\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0430\u0433\u0435\u043d\u0442")}):this._agentService.create(n).pipe(o=>((0,k.b)(o),o)).subscribe(o=>{o.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u0410\u0433\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0430\u0433\u0435\u043d\u0442")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}generate(){this.form.patchValue({password:this.passwordGenerator.generateRandomPassword()})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.WI),t.Y36(P._W),t.Y36(w),t.Y36(F.K),t.Y36(t.sBO),t.Y36(p.uw),t.Y36(X.W))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-agent"]],standalone:!0,features:[t.jDz],decls:130,vars:123,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","","class","font-bold text-2xl uppercase",4,"ngIf"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],[1,"grid","grid-cols-3","gap-4","px-3"],["matInput","","formControlName","username",3,"ngClass"],[4,"ngIf"],["matInput","","required","","formControlName","password",3,"ngClass"],["required","","matInput","","name","companyName","formControlName","companyName",3,"ngClass"],["required","","matInput","","name","legalAddress","formControlName","legalAddress",3,"ngClass"],["required","","matInput","","name","physicalAddress","formControlName","physicalAddress",3,"ngClass"],["required","","matInput","","name","managerFirstName","formControlName","managerFirstName",3,"ngClass"],["required","","matInput","","name","managerLastName","formControlName","managerLastName",3,"ngClass"],["type","text","mask","999999999","matInput","","name","inn","formControlName","inn","maxlength","9","required","",3,"ngClass"],["type","text","mask","99999","matInput","","name","oked","formControlName","oked","maxlength","5","required","",3,"ngClass"],["type","text","matInput","","name","mfo","formControlName","mfo","mask","99999","maxlength","5","required","",3,"ngClass"],["matInput","","name","bankBranchName","formControlName","bankBranchName","required","",3,"ngClass"],["formControlName","phoneNumber","name","phoneNumber",3,"cssClass","preferredCountries","enablePlaceholder","enableSearch"],["phone",""],[1,"flex","flex-wrap","gap-4","justify-start"],[1,"w-1/3"],["type","button","mat-flat-button","",1,"mx-2",3,"color","click"],["formArrayName","bankAccounts",1,"flex","flex-wrap","items-center","justify-center","w-full"],["class","w-full",3,"formGroupName",4,"ngFor","ngForOf"],[1,"w-40"],[1,"relative","flex","items-center","justify-center","w-40","h-32","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10","rounded-md"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["formControlName","registrationCertificateFilePath","id","avatar-file-input2","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],[1,"flex"],["for","avatar-file-input2","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon","click"],["class","object-fill w-full h-full",3,"src",4,"ngIf"],[1,"w-40","mt-6"],["formControlName","managerPassportFilePath","id","avatar-file-input1","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","avatar-file-input1","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],[1,"w-full",3,"formGroupName"],["type","number","matInput","","formControlName","account"],["matPrefix","","formControlName","currencyId"],[3,"value",4,"ngFor","ngForOf"],["mat-flat-button","",1,"fuse-mat-button",3,"color","click"],[3,"value"],[1,"object-fill","w-full","h-full",3,"src"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.YNc(1,tt,3,3,"p",1),t.YNc(2,et,3,3,"p",1),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-dialog-content")(7,"form",4)(8,"div",5)(9,"mat-form-field")(10,"mat-label"),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t._UZ(13,"input",6),t.YNc(14,nt,3,3,"mat-error",7),t.qZA(),t.TgZ(15,"mat-form-field")(16,"mat-label"),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t._UZ(19,"input",8),t.YNc(20,at,3,3,"mat-error",7),t.YNc(21,ot,2,0,"mat-error",7),t.YNc(22,it,2,0,"mat-error",7),t.qZA(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25),t.ALo(26,"transloco"),t.qZA(),t._UZ(27,"input",9),t.YNc(28,rt,3,3,"mat-error",7),t.qZA(),t.TgZ(29,"mat-form-field")(30,"mat-label"),t._uU(31),t.ALo(32,"transloco"),t.qZA(),t._UZ(33,"input",10),t.YNc(34,lt,3,3,"mat-error",7),t.qZA(),t.TgZ(35,"mat-form-field")(36,"mat-label"),t._uU(37),t.ALo(38,"transloco"),t.qZA(),t._UZ(39,"input",11),t.YNc(40,st,3,3,"mat-error",7),t.qZA(),t.TgZ(41,"mat-form-field")(42,"mat-label"),t._uU(43),t.ALo(44,"transloco"),t.qZA(),t._UZ(45,"input",12),t.YNc(46,ct,3,3,"mat-error",7),t.qZA(),t.TgZ(47,"mat-form-field")(48,"mat-label"),t._uU(49),t.ALo(50,"transloco"),t.qZA(),t._UZ(51,"input",13),t.YNc(52,mt,3,3,"mat-error",7),t.qZA(),t.TgZ(53,"mat-form-field")(54,"mat-label"),t._uU(55),t.ALo(56,"transloco"),t.qZA(),t._UZ(57,"input",14),t.YNc(58,ut,3,3,"mat-error",7),t.qZA(),t.TgZ(59,"mat-form-field")(60,"mat-label"),t._uU(61),t.ALo(62,"transloco"),t.qZA(),t._UZ(63,"input",15),t.YNc(64,pt,3,3,"mat-error",7),t.qZA(),t.TgZ(65,"mat-form-field")(66,"mat-label"),t._uU(67),t.ALo(68,"transloco"),t.qZA(),t._UZ(69,"input",16),t.YNc(70,dt,3,3,"mat-error",7),t.qZA(),t.TgZ(71,"mat-form-field")(72,"mat-label"),t._uU(73),t.ALo(74,"transloco"),t.qZA(),t._UZ(75,"input",17),t.YNc(76,gt,3,3,"mat-error",7),t.qZA(),t.TgZ(77,"mat-form-field")(78,"mat-label"),t._uU(79),t.ALo(80,"transloco"),t.qZA(),t._UZ(81,"ngx-mat-intl-tel-input",18,19),t.qZA()(),t.TgZ(83,"div",20)(84,"div",21)(85,"button",22),t.NdJ("click",function(){return a.addItem()}),t._uU(86,"Add "),t.qZA(),t.TgZ(87,"div",23),t.YNc(88,ft,8,3,"mat-form-field",24),t.qZA()(),t.TgZ(89,"div",20)(90,"div",25)(91,"mat-label"),t._uU(92),t.ALo(93,"transloco"),t.qZA(),t.TgZ(94,"div",26),t._UZ(95,"div",27),t.TgZ(96,"div",28)(97,"div")(98,"input",29),t.NdJ("change",function(u){return a.selectFile(u,"registrationCertificateFilePath")}),t.qZA(),t.TgZ(99,"div",30)(100,"label",31),t._UZ(101,"mat-icon",32),t.qZA(),t.TgZ(102,"label",33)(103,"mat-icon",34),t.NdJ("click",function(){return a.fileService.downloadImage("agent",a.registrationCertificateFilePath)}),t.qZA()()()()(),t.YNc(104,ht,1,1,"img",35),t.YNc(105,At,3,6,"img",35),t.qZA()(),t.TgZ(106,"div",36)(107,"mat-label"),t._uU(108),t.ALo(109,"transloco"),t.qZA(),t.TgZ(110,"div",26),t._UZ(111,"div",27),t.TgZ(112,"div",28)(113,"div")(114,"input",37),t.NdJ("change",function(u){return a.selectFile(u,"managerPassportFilePath")}),t.qZA(),t.TgZ(115,"div",30)(116,"label",38),t._UZ(117,"mat-icon",32),t.qZA(),t.TgZ(118,"label",33)(119,"mat-icon",34),t.NdJ("click",function(){return a.fileService.downloadImage("agent",a.managerPassportFilePath)}),t.qZA()()()()(),t.YNc(120,vt,1,1,"img",35),t.YNc(121,Zt,3,6,"img",35),t.qZA()()()()()(),t.TgZ(122,"mat-dialog-actions",30)(123,"div",39)(124,"button",40),t._uU(125),t.ALo(126,"transloco"),t.qZA(),t.TgZ(127,"button",41),t.NdJ("click",function(){return a.submit()}),t._uU(128),t.ALo(129,"transloco"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("ngIf",!a.edit),t.xp6(1),t.Q6J("ngIf",a.edit),t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(4),t.Oqu(t.lcZ(12,65,"login")),t.xp6(2),t.Q6J("ngClass",t.VKq(97,q,a.f.username.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.username.errors?null:a.f.username.errors.required),t.xp6(3),t.Oqu(t.lcZ(18,67,"password")),t.xp6(2),t.Q6J("ngClass",t.VKq(99,q,a.f.password.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.password.errors?null:a.f.password.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.f.password.errors?null:a.f.password.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==a.f.password.errors?null:a.f.password.errors.pattern),t.xp6(3),t.Oqu(t.lcZ(26,69,"company_name")),t.xp6(2),t.Q6J("ngClass",t.VKq(101,q,a.f.companyName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.companyName.errors?null:a.f.companyName.errors.required),t.xp6(3),t.Oqu(t.lcZ(32,71,"legal_address")),t.xp6(2),t.Q6J("ngClass",t.VKq(103,q,a.f.legalAddress.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.legalAddress.errors?null:a.f.legalAddress.errors.required),t.xp6(3),t.Oqu(t.lcZ(38,73,"actual_address")),t.xp6(2),t.Q6J("ngClass",t.VKq(105,q,a.f.physicalAddress.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.physicalAddress.errors?null:a.f.physicalAddress.errors.required),t.xp6(3),t.hij(" ",t.lcZ(44,75,"director_first_name"),""),t.xp6(2),t.Q6J("ngClass",t.VKq(107,q,a.f.managerFirstName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.managerFirstName.errors?null:a.f.managerFirstName.errors.required),t.xp6(3),t.hij(" ",t.lcZ(50,77,"director_last_name"),""),t.xp6(2),t.Q6J("ngClass",t.VKq(109,q,a.f.managerLastName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.managerLastName.errors?null:a.f.managerLastName.errors.required),t.xp6(3),t.Oqu(t.lcZ(56,79,"inn")),t.xp6(2),t.Q6J("ngClass",t.VKq(111,q,a.f.inn.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.inn.errors?null:a.f.inn.errors.required),t.xp6(3),t.Oqu(t.lcZ(62,81,"oked")),t.xp6(2),t.Q6J("ngClass",t.VKq(113,q,a.f.oked.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.oked.errors?null:a.f.oked.errors.required),t.xp6(3),t.Oqu(t.lcZ(68,83,"mfo")),t.xp6(2),t.Q6J("ngClass",t.VKq(115,q,a.f.mfo.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.mfo.errors?null:a.f.mfo.errors.required),t.xp6(3),t.hij(" ",t.lcZ(74,85,"bank_name"),""),t.xp6(2),t.Q6J("ngClass",t.VKq(117,q,a.f.bankBranchName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.bankBranchName.errors?null:a.f.bankBranchName.errors.required),t.xp6(3),t.hij(" ",t.lcZ(80,87,"phone"),""),t.xp6(2),t.Q6J("cssClass","custom")("preferredCountries",t.DdM(119,xt))("enablePlaceholder",!0)("enableSearch",!0),t.xp6(4),t.Q6J("color","primary"),t.xp6(3),t.Q6J("ngForOf",a.itemsFormArray.controls),t.xp6(4),t.hij("",t.lcZ(93,89,"registration_certificate")," "),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:arrow-down-tray"),t.xp6(1),t.Q6J("ngIf",a.registrationCertificateFilePath&&!a.edit),t.xp6(1),t.Q6J("ngIf",a.registrationCertificateFilePath&&a.edit),t.xp6(3),t.hij("",t.lcZ(109,91,"passport_owner")," "),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(3),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:arrow-down-tray"),t.xp6(1),t.Q6J("ngIf",a.managerPassportFilePath&&!a.edit),t.xp6(1),t.Q6J("ngIf",a.managerPassportFilePath&&a.edit),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(126,93,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(120,bt,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(129,95,"save")," "))},dependencies:[_.y4,_.Ot,A.ez,A.mk,A.sg,A.O5,A.Ov,M.d,d.c,d.Nt,c.KE,c.hX,c.TO,c.qo,v.Ps,v.Hw,C.LD,C.gD,W.ey,h.ot,h.lW,h.RK,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u,r.x0,r.CE,p.Is,p.ZT,p.uh,p.xY,p.H8,r.u5,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP,z.d,V.z],encapsulation:2,changeDetection:0})}return e})();var Q=s(5159),J=s(3231),N=s(8280),U=s(4867);function Tt(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}const Ct=function(e){return{"is-invalid":e}},qt=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button dark":i}};let wt=(()=>{class e{constructor(n,o,a,l){this.data=n,this._toaster=o,this._agentService=a,this._dialog=l,this.form=new r.cw({id:new r.NI(""),block_reason:new r.NI("",[r.kI.required])}),this.data&&this.form.patchValue({id:this.data})}get f(){return this.form.controls}submit(){this.form.valid?this._agentService.block(this.form.get("id").value,this.form.get("block_reason").value).subscribe(n=>{n.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u041a\u043b\u0438\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d")):this._toaster.error("\u041a\u043b\u0438\u0435\u043d\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(P._W),t.Y36(w),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-agent-block"]],standalone:!0,features:[t.jDz],decls:21,vars:21,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],[1,"p-3"],["color","accent",1,"w-full"],["matInput","","formControlName","block_reason","rows","4",3,"ngClass"],[4,"ngIf"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content")(8,"form",4)(9,"div",5)(10,"mat-form-field",6),t._UZ(11,"textarea",7),t.YNc(12,Tt,3,3,"mat-error",8),t.qZA()()()(),t.TgZ(13,"mat-dialog-actions",9)(14,"div",10)(15,"button",11),t._uU(16),t.ALo(17,"transloco"),t.qZA(),t.TgZ(18,"button",12),t.NdJ("click",function(){return a.submit()}),t._uU(19),t.ALo(20,"transloco"),t.qZA()()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,10,"block")),t.xp6(6),t.Q6J("formGroup",a.form),t.xp6(3),t.Q6J("ngClass",t.VKq(16,Ct,null==a.f.block_reason?null:a.f.block_reason.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.block_reason.errors?null:a.f.block_reason.errors.required),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(17,12,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(18,qt,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(20,14,"save")," "))},dependencies:[_.y4,_.Ot,A.mk,J.Co,U.Fk,N.FA,d.c,d.Nt,c.KE,c.TO,v.Ps,v.Hw,C.LD,h.ot,h.lW,h.RK,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.Is,p.ZT,p.uh,p.xY,p.H8,r.u5,A.O5,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP],encapsulation:2,changeDetection:0})}return e})();function Nt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1," No "),t.qZA())}function Ut(e,i){if(1&e&&(t.TgZ(0,"mat-cell",38),t._uU(1),t.qZA()),2&e){const n=i.index;t.xp6(1),t.hij(" ",n+1," ")}}function Dt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1," ID "),t.qZA())}function It(e,i){if(1&e&&(t.TgZ(0,"mat-cell",38),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.id," ")}}function yt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"full_name")," "))}function Lt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.AsE(" ",null==n?null:n.managerFirstName," ",null==n?null:n.managerLastName," ")}}function Pt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"login")," "))}function Ft(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.username," ")}}function Jt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"register_date")," "))}function kt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," ")}}function Ot(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"last_enter")," "))}function Yt(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==n?null:n.last_inter,"dd/MM/yyyy HH:mm")," ")}}function Qt(e,i){1&e&&(t.TgZ(0,"mat-header-cell",37),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"status")," "))}function jt(e,i){1&e&&t._UZ(0,"button",41)}function St(e,i){1&e&&t._UZ(0,"button",42)}function Et(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,jt,1,0,"button",39),t.YNc(2,St,1,0,"button",40),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=n&&n.blocked)),t.xp6(1),t.Q6J("ngIf",null==n?null:n.blocked)}}function Bt(e,i){1&e&&t._UZ(0,"mat-header-cell")}function Mt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.block(a.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"lock"),t.qZA(),t._uU(3),t.ALo(4,"transloco"),t.qZA()}2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"block")," "))}function Wt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",46),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,l=t.oxw();return t.KtG(l.active(a.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"lock_open"),t.qZA(),t._uU(3),t.ALo(4,"transloco"),t.qZA()}2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"unblock")," "))}const Ht=function(e){return["/agents",e]};function Kt(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-cell")(1,"div",43)(2,"button",44),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,45)(7,"button",46),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.edit(l))}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t._uU(10),t.ALo(11,"transloco"),t.qZA(),t.TgZ(12,"button",47)(13,"mat-icon"),t._uU(14,"list"),t.qZA(),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.YNc(17,Mt,5,3,"button",48),t.YNc(18,Wt,5,3,"button",48),t.TgZ(19,"button",49),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.delete(l.id))}),t.TgZ(20,"mat-icon"),t._uU(21,"remove"),t.qZA(),t._uU(22),t.ALo(23,"transloco"),t.qZA()()()()}if(2&e){const n=i.$implicit,o=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",o),t.xp6(8),t.hij(" ",t.lcZ(11,7,"edit")," "),t.xp6(2),t.Q6J("routerLink",t.VKq(13,Ht,null==n?null:n.id)),t.xp6(3),t.hij(" ",t.lcZ(16,9,"driver")," "),t.xp6(2),t.Q6J("ngIf",!(null!=n&&n.blocked)),t.xp6(1),t.Q6J("ngIf",n.blocked),t.xp6(4),t.hij(" ",t.lcZ(23,11,"delete")," ")}}function Rt(e,i){1&e&&t._UZ(0,"mat-header-row")}function $t(e,i){1&e&&t._UZ(0,"mat-row")}function zt(e,i){1&e&&t._UZ(0,"app-no-data-placeholder",50)}const Gt=function(){return[10,20,50,100,200]};let Xt=(()=>{class e extends D.G{constructor(n,o){super(),this._agentService=n,this._dialog=o,this.filters={merchantid:"",companyName:"",createdAtFrom:"",createdAtTo:""},this.pageParams={page:0,limit:10,totalPagesCount:1,sortBy:"id",sortType:"desc"},this.displayedColumns=["index","id","full_name","login","register_date","last_enter","status","actions"],this.dataSource=new m.by([])}clearFilters(){this.filters={merchantid:"",companyName:"",createdAtFrom:"",createdAtTo:""}}filterDrivers(){}ngOnInit(){this.getAllAgents(this.pageParams)}getAllAgents(n){this._agentService.getAll(n).subscribe(o=>{this.dataSource.data=o?.data.content,this.pageParams.pageSize=o?.data?.pageSize,this.pageParams.page=o?.data?.pageIndex,this.pageParams.totalPagesCount=o?.data?.totalPagesCount})}onPageChange(n){this.pageParams.pageSize=n.pageSize,this.pageParams.page=n.pageIndex,this.getAllAgents(this.pageParams)}add(){this._dialog.open(H,{minWidth:"80vw",maxWidth:"90vw",minHeight:"50vh",maxHeight:"90vh",autoFocus:!1}).afterClosed().subscribe(()=>{this.getAllAgents(this.pageParams)})}block(n){this._dialog.open(wt,{minWidth:"20vw",maxWidth:"40vw",minHeight:"42vh",maxHeight:"85vh",data:n,autoFocus:!1}).afterClosed().subscribe(()=>{this.getAllAgents(this.pageParams)})}active(n){this._agentService.active(n).subscribe(()=>{this.getAllAgents(this.pageParams)})}edit(n){this._dialog.open(H,{minWidth:"80vw",maxWidth:"90vw",minHeight:"50vh",maxHeight:"90vh",autoFocus:!1,data:n}).afterClosed().subscribe(()=>{this.getAllAgents(this.pageParams)})}delete(n){this._agentService.delete(n).subscribe(()=>{this.getAllAgents(this.pageParams)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(w),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-agents"]],viewQuery:function(o,a){if(1&o&&t.Gf(f.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first)}},standalone:!0,features:[t.qOj,t.jDz],decls:70,vars:44,consts:[[1,"flex","flex-col","flex-auto"],[1,"flex-auto"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"flex","items-baseline","flex-wrap"],["color","accent",1,"w-50","px-1"],["matInput","","name","ID",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","company_name",3,"placeholder","ngModel","ngModelChange"],["matInput","",3,"matDatepicker","ngModel","placeholder","ngModelChange"],["matIconSuffix","",3,"for"],["picker1",""],["picker",""],[1,"px-1"],["mat-flat-button","","color","warn",1,"",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"mt-4","h-100"],["matSort","",3,"dataSource"],["matColumnDef","index"],["class","font-bold",4,"matHeaderCellDef"],["class","index-column",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","full_name"],[4,"matCellDef"],["matColumnDef","login"],["matColumnDef","register_date"],["matColumnDef","last_enter"],["matColumnDef","status"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","m-1",4,"ngIf"],[3,"showFirstLastButtons","length","pageSize","pageIndex","pageSizeOptions","page"],[1,"font-bold"],[1,"index-column"],["class","bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full",4,"ngIf"],["class","bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-full",4,"ngIf"],[1,"bg-green-500","hover:bg-green-600","text-white","font-bold","py-2","px-4","rounded-full"],[1,"bg-red-500","hover:bg-red-600","text-white","font-bold","py-2","px-4","rounded-full"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"],["mat-menu-item","","color","accent",3,"routerLink"],["mat-menu-item","","color","accent",3,"click",4,"ngIf"],["mat-menu-item","","color","warn",3,"click"],[1,"m-1"]],template:function(o,a){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5),t.ALo(6,"transloco"),t.qZA()(),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){return a.add()}),t._UZ(9,"mat-icon",6),t.TgZ(10,"span",7),t._uU(11),t.ALo(12,"transloco"),t.qZA()()()(),t.TgZ(13,"div",8)(14,"mat-form-field",9)(15,"input",10),t.NdJ("ngModelChange",function(u){return a.filters.merchantid=u}),t.ALo(16,"transloco"),t.qZA()(),t.TgZ(17,"mat-form-field",9)(18,"input",11),t.NdJ("ngModelChange",function(u){return a.filters.companyName=u}),t.ALo(19,"transloco"),t.qZA()(),t.TgZ(20,"mat-form-field",9)(21,"input",12),t.NdJ("ngModelChange",function(u){return a.filters.createdAtFrom=u}),t.ALo(22,"transloco"),t.qZA(),t._UZ(23,"mat-datepicker-toggle",13)(24,"mat-datepicker",null,14),t.qZA(),t.TgZ(26,"mat-form-field",9)(27,"input",12),t.NdJ("ngModelChange",function(u){return a.filters.createdAtTo=u}),t.ALo(28,"transloco"),t.qZA(),t._UZ(29,"mat-datepicker-toggle",13)(30,"mat-datepicker",null,15),t.qZA(),t.TgZ(32,"div",16)(33,"button",17),t.NdJ("click",function(){return a.clearFilters()}),t._uU(34),t.ALo(35,"transloco"),t.qZA()(),t.TgZ(36,"div",16)(37,"button",18),t.NdJ("click",function(){return a.getAllAgents()}),t._uU(38),t.ALo(39,"transloco"),t.qZA()()(),t.TgZ(40,"div",19)(41,"mat-table",20),t.ynx(42,21),t.YNc(43,Nt,2,0,"mat-header-cell",22),t.YNc(44,Ut,2,1,"mat-cell",23),t.BQk(),t.ynx(45,24),t.YNc(46,Dt,2,0,"mat-header-cell",22),t.YNc(47,It,2,1,"mat-cell",23),t.BQk(),t.ynx(48,25),t.YNc(49,yt,3,3,"mat-header-cell",22),t.YNc(50,Lt,2,2,"mat-cell",26),t.BQk(),t.ynx(51,27),t.YNc(52,Pt,3,3,"mat-header-cell",22),t.YNc(53,Ft,2,1,"mat-cell",26),t.BQk(),t.ynx(54,28),t.YNc(55,Jt,3,3,"mat-header-cell",22),t.YNc(56,kt,3,4,"mat-cell",26),t.BQk(),t.ynx(57,29),t.YNc(58,Ot,3,3,"mat-header-cell",22),t.YNc(59,Yt,3,4,"mat-cell",26),t.BQk(),t.ynx(60,30),t.YNc(61,Qt,3,3,"mat-header-cell",22),t.YNc(62,Et,3,2,"mat-cell",26),t.BQk(),t.ynx(63,31),t.YNc(64,Bt,1,0,"mat-header-cell",32),t.YNc(65,Kt,24,15,"mat-cell",26),t.BQk(),t.YNc(66,Rt,1,0,"mat-header-row",33),t.YNc(67,$t,1,0,"mat-row",34),t.qZA(),t.YNc(68,zt,1,0,"app-no-data-placeholder",35),t.TgZ(69,"mat-paginator",36),t.NdJ("page",function(u){return a.onPageChange(u)}),t.qZA()()()()),2&o){const l=t.MAs(25),u=t.MAs(31);t.xp6(5),t.Oqu(t.lcZ(6,27,"agents")),t.xp6(3),t.Q6J("color","primary"),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:plus"),t.xp6(2),t.Oqu(t.lcZ(12,29,"add")),t.xp6(4),t.s9C("placeholder",t.lcZ(16,31,"ID")),t.Q6J("ngModel",a.filters.merchantid),t.xp6(3),t.s9C("placeholder",t.lcZ(19,33,"company_name")),t.Q6J("ngModel",a.filters.companyName),t.xp6(3),t.s9C("placeholder",t.lcZ(22,35,"start_date_reg")),t.Q6J("matDatepicker",l)("ngModel",a.filters.createdAtFrom),t.xp6(2),t.Q6J("for",l),t.xp6(4),t.s9C("placeholder",t.lcZ(28,37,"end_date_reg")),t.Q6J("matDatepicker",u)("ngModel",a.filters.createdAtTo),t.xp6(2),t.Q6J("for",u),t.xp6(5),t.hij(" ",t.lcZ(35,39,"clear"),""),t.xp6(4),t.hij(" ",t.lcZ(39,41,"filter"),""),t.xp6(3),t.Q6J("dataSource",a.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",!a.dataSource.data.length),t.xp6(1),t.Q6J("showFirstLastButtons",!0)("length",a.pageParams.totalPagesCount-1)("pageSize",a.pageParams.limit)("pageIndex",a.pageParams.page)("pageSizeOptions",t.DdM(43,Gt))}},dependencies:[_.y4,_.Ot,A.uU,Q.rH,N.FA,N.Mq,N.hl,N.nW,r.u5,r.Fj,r.JJ,r.On,r.UX,v.Ps,v.Hw,Q.Bz,B.o,h.ot,h.lW,h.RK,A.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,c.lN,c.KE,c.R9,d.c,d.Nt,x.JX,x.YE,f.TU,f.NW,g.Tx,g.VK,g.OP,g.p6,Z.rP],encapsulation:2,changeDetection:0})}return e})();function K(e,i){for(const n of e.entries()){const[o]=n;i.includes(o)||(console.log(o),e.delete(o))}return e}var j=s(6133);function Vt(e,i){1&e&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"add_driver")))}function te(e,i){1&e&&(t.TgZ(0,"p",29),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"edit_driver")))}function ee(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),t.qZA())}function ne(e,i){if(1&e&&t._UZ(0,"img",30),2&e){const n=t.oxw();t.Q6J("src",n.passportFilePath,t.LSH)}}function ae(e,i){if(1&e&&(t._UZ(0,"img",30),t.ALo(1,"async"),t.ALo(2,"fileFetch")),2&e){const n=t.oxw();t.Q6J("src",t.lcZ(1,1,t.xi3(2,3,n.passportFilePath,"driver")),t.LSH)}}function oe(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),t.qZA())}function ie(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," \u041f\u043e\u043b\u0435 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c "),t.qZA())}function re(e,i){if(1&e&&t._UZ(0,"img",30),2&e){const n=t.oxw();t.Q6J("src",n.driverLisenseFilePath,t.LSH)}}function le(e,i){if(1&e&&(t._UZ(0,"img",30),t.ALo(1,"async"),t.ALo(2,"fileFetch")),2&e){const n=t.oxw();t.Q6J("src",t.lcZ(1,1,t.xi3(2,3,n.driverLisenseFilePath,"driver")),t.LSH)}}const se=function(e,i){return{"bg-gray-50 dark:text-black":e,"card-background-black text-white":i}};function ce(e,i){if(1&e&&(t.TgZ(0,"mat-radio-button",31)(1,"p",32),t._uU(2),t.qZA()()),2&e){const n=i.$implicit,o=t.oxw();t.Q6J("color",o.white)("ngClass",t.WLB(4,se,!o.form.invalid||!o.form.pristine,o.form.invalid&&o.form.pristine))("value",n.id),t.xp6(2),t.hij("$",null==n?null:n.price,"/\u043c\u0435\u0441\u044f\u0446")}}const me=function(){return["uz"]},S=function(e){return{"is-invalid":e}},ue=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button dark":i}};let pe=(()=>{class e{constructor(n,o,a,l,u,T){this.data=n,this._toaster=o,this._driverService=a,this._typeService=l,this._cdr=u,this._dialog=T,this.subscription=[],this.edit=!1,this.formData=new FormData,this.form=new r.cw({id:new r.NI(""),subscriptionId:new r.NI(""),agentId:new r.NI(""),firstName:new r.NI("",[r.kI.required]),lastName:new r.NI("",[r.kI.required]),phoneNumbers:new r.NI("",[r.kI.required]),password:new r.NI("",this.edit?null:[r.kI.required,r.kI.minLength(8),r.kI.maxLength(16),r.kI.pattern("^[a-zA-Z0-9]+$")]),passportFilePath:new r.NI("",[r.kI.required]),driverLisenseFilePath:new r.NI("",[r.kI.required])}),this.data&&(this.edit=!0,this.form.patchValue({agentId:n})),this.getSubscription()}getSubscription(){this._typeService.getSubscription().subscribe(n=>{this.subscription=n.data})}onFileSelected(n,o){const a=n.target.files[0];switch(o){case"passportFilePath":this.form.patchValue({passportFilePath:a});case"driverLisenseFilePath":this.form.patchValue({driverLisenseFilePath:a})}}getImageUrl(n){const o=this.form.get(`${n}`).value;return o instanceof File?URL.createObjectURL(o):""}get f(){return this.form.controls}selectFile(n,o){const a=n.target.files[0];if(a){this.formData.append(o,a,(new Date).getTime().toString()+".jpg");const l=new FileReader;l.onload=()=>{this[o]=l.result,this._cdr.detectChanges()},l.readAsDataURL(a)}}submit(){this.formData.append("id",this.form.get("id").value),this.formData.append("agentId",this.form.get("agentId").value),this.formData.append("subscriptionId",this.form.get("subscriptionId").value),this.formData.append("firstName",this.form.get("firstName").value),this.formData.append("lastName",this.form.get("lastName").value),this.formData.append("password",this.form.get("password").value),"string"==typeof this.form.get("passportFilePath")?.value&&this.formData.append("passportFilePath",this.form.get("passportFilePath")?.value),"string"==typeof this.form.get("driverLisenseFilePath")?.value&&this.formData.append("driverLisenseFilePath",this.form.get("driverLisenseFilePath")?.value),this.form.valid?this.form.value.id?this._driverService.update(this.formData).pipe(n=>((0,k.b)(n)&&(this.formData=K(this.formData,["passportFilePath","driverLisenseFilePath"])),n)).subscribe(n=>{n.success?(this._dialog.closeAll(),this._toaster.success("\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c")}):this._driverService.create(this.formData).pipe(n=>((0,k.b)(n)&&(this.formData=K(this.formData,["passportFilePath","driverLisenseFilePath"])),n)).subscribe(n=>{n.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(P._W),t.Y36(j.P),t.Y36(F.K),t.Y36(t.sBO),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-agent-driver"]],standalone:!0,features:[t.jDz],decls:72,vars:62,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","","class","font-bold text-2xl uppercase",4,"ngIf"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],[1,"grid","grid-cols-2","gap-4"],[1,"p-3"],["color","accent",1,"w-full"],["formControlName","phoneNumbers","name","phoneNumbers",3,"cssClass","preferredCountries","enablePlaceholder","enableSearch"],["phoneNumbers",""],["matInput","","formControlName","firstName",3,"ngClass"],[4,"ngIf"],[1,"w-32"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden"],[1,"absolute","inset-0","bg-black","bg-opacity-50","z-10","rounded-md"],[1,"absolute","inset-0","flex","items-center","justify-center","z-20"],["formControlName","passportFilePath","id","avatar-file-input1","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["for","avatar-file-input1","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-white",3,"svgIcon"],["class","object-fill w-full h-full",3,"src",4,"ngIf"],["matInput","","formControlName","lastName",3,"ngClass"],["matInput","","formControlName","password",3,"ngClass"],["formControlName","driverLisenseFilePath","id","avatar-file-input1","type","file",1,"absolute","h-0","w-0","opacity-0","invisible","pointer-events-none",3,"multiple","accept","change"],["formControlName","subscriptionId",1,"flex","items-center"],["class","w-2/4 m-4 p-4 rounded-lg","value","option1",3,"color","ngClass","value",4,"ngFor","ngForOf"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],[1,"object-fill","w-full","h-full",3,"src"],["value","option1",1,"w-2/4","m-4","p-4","rounded-lg",3,"color","ngClass","value"],[1,"w-40"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0),t.YNc(1,Vt,3,3,"p",1),t.YNc(2,te,3,3,"p",1),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-dialog-content")(7,"form",4)(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),t._uU(12),t.ALo(13,"transloco"),t.qZA(),t._UZ(14,"ngx-mat-intl-tel-input",8,9),t.qZA(),t.TgZ(16,"mat-form-field",7)(17,"mat-label"),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t._UZ(20,"input",10),t.YNc(21,ee,2,0,"mat-error",11),t.qZA(),t.TgZ(22,"div",12)(23,"mat-label"),t._uU(24),t.ALo(25,"transloco"),t.qZA(),t.TgZ(26,"div",13),t._UZ(27,"div",14),t.TgZ(28,"div",15)(29,"div")(30,"input",16),t.NdJ("change",function(u){return a.selectFile(u,"passportFilePath")}),t.qZA(),t.TgZ(31,"label",17),t._UZ(32,"mat-icon",18),t.qZA()()(),t.YNc(33,ne,1,1,"img",19),t.YNc(34,ae,3,6,"img",19),t.qZA()()(),t.TgZ(35,"div",6)(36,"mat-form-field",7)(37,"mat-label"),t._uU(38),t.ALo(39,"transloco"),t.qZA(),t._UZ(40,"input",20),t.YNc(41,oe,2,0,"mat-error",11),t.qZA(),t.TgZ(42,"mat-form-field",7)(43,"mat-label"),t._uU(44),t.ALo(45,"transloco"),t.qZA(),t._UZ(46,"input",21),t.YNc(47,ie,2,0,"mat-error",11),t.qZA(),t.TgZ(48,"div",12)(49,"mat-label"),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t.TgZ(52,"div",13),t._UZ(53,"div",14),t.TgZ(54,"div",15)(55,"div")(56,"input",22),t.NdJ("change",function(u){return a.selectFile(u,"driverLisenseFilePath")}),t.qZA(),t.TgZ(57,"label",17),t._UZ(58,"mat-icon",18),t.qZA()()(),t.YNc(59,re,1,1,"img",19),t.YNc(60,le,3,6,"img",19),t.qZA()()(),t.TgZ(61,"div",6)(62,"mat-radio-group",23),t.YNc(63,ce,3,7,"mat-radio-button",24),t.qZA()()()()(),t.TgZ(64,"mat-dialog-actions",25)(65,"div",26)(66,"button",27),t._uU(67),t.ALo(68,"transloco"),t.qZA(),t.TgZ(69,"button",28),t.NdJ("click",function(){return a.submit()}),t._uU(70),t.ALo(71,"transloco"),t.qZA()()()),2&o&&(t.xp6(1),t.Q6J("ngIf",!a.edit),t.xp6(1),t.Q6J("ngIf",a.edit),t.xp6(5),t.Q6J("formGroup",a.form),t.xp6(5),t.Oqu(t.lcZ(13,36,"phone")),t.xp6(2),t.Q6J("cssClass","custom")("preferredCountries",t.DdM(52,me))("enablePlaceholder",!0)("enableSearch",!0),t.xp6(4),t.Oqu(t.lcZ(19,38,"first_name")),t.xp6(2),t.Q6J("ngClass",t.VKq(53,S,a.f.firstName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.firstName.errors?null:a.f.firstName.errors.required),t.xp6(3),t.Oqu(t.lcZ(25,40,"passport")),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",a.passportFilePath&&!a.edit),t.xp6(1),t.Q6J("ngIf",a.passportFilePath&&a.edit),t.xp6(4),t.Oqu(t.lcZ(39,42,"last_name")),t.xp6(2),t.Q6J("ngClass",t.VKq(55,S,a.f.lastName.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.lastName.errors?null:a.f.lastName.errors.required),t.xp6(3),t.Oqu(t.lcZ(45,44,"password")),t.xp6(2),t.Q6J("ngClass",t.VKq(57,S,a.f.password.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.password.errors?null:a.f.password.errors.required),t.xp6(3),t.hij("",t.lcZ(51,46,"driver_license")," "),t.xp6(6),t.Q6J("multiple",!1)("accept","image/jpeg, image/png"),t.xp6(2),t.Q6J("svgIcon","heroicons_outline:camera"),t.xp6(1),t.Q6J("ngIf",a.driverLisenseFilePath&&!a.edit),t.xp6(1),t.Q6J("ngIf",a.driverLisenseFilePath&&a.edit),t.xp6(3),t.Q6J("ngForOf",a.subscription),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(68,48,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(59,ue,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(71,50,"save")," "))},dependencies:[_.y4,_.Ot,A.mk,J.Co,U.Fk,U.VQ,U.U0,N.FA,M.d,d.c,d.Nt,c.KE,c.hX,c.TO,v.Ps,v.Hw,C.LD,h.ot,h.lW,h.RK,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.Is,p.ZT,p.uh,p.xY,p.H8,r.u5,A.ax,A.O5,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP],styles:[".mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#42f477!important}.mat-radio-button.mat-accent .mat-radio-inner-circle{color:#f4427d!important;background-color:#42f454!important}.mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#f5060642!important}\n"],encapsulation:2,changeDetection:0})}return e})();var de=s(3537),ge=s(943);function _e(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"yes")," "))}function fe(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"no")," "))}function he(e,i){if(1&e&&(t.TgZ(0,"div",16)(1,"div")(2,"p",17),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"p",18),t._uU(6,"\u0422\u0435\u043d\u0442\u043e\u0432\u043a\u0430"),t.qZA()(),t.TgZ(7,"div")(8,"p",17),t._uU(9),t.ALo(10,"transloco"),t.qZA(),t.TgZ(11,"p",18),t._uU(12),t.qZA()(),t.TgZ(13,"div")(14,"p",17),t._uU(15),t.ALo(16,"transloco"),t.qZA(),t.TgZ(17,"p",18),t.YNc(18,_e,3,3,"span",27),t.YNc(19,fe,3,3,"span",27),t.qZA()(),t.TgZ(20,"div")(21,"p",17),t._uU(22),t.ALo(23,"transloco"),t.qZA(),t.TgZ(24,"p",18),t._uU(25),t.qZA()()()),2&e){const n=i.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,8,"transport_cargo")),t.xp6(6),t.Oqu(t.lcZ(10,10,"Date")),t.xp6(3),t.Oqu(null==n?null:n.createdAt),t.xp6(3),t.Oqu(t.lcZ(16,12,"adr")),t.xp6(3),t.Q6J("ngIf",null==n?null:n.isAdr),t.xp6(1),t.Q6J("ngIf",!(null!=n&&n.isAdr)),t.xp6(3),t.Oqu(t.lcZ(23,14,"state_number_trailer")),t.xp6(3),t.Oqu(null==n?null:n.stateNumber)}}function Ae(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"label",31),t._uU(4),t.ALo(5,"transloco"),t.qZA()(),t.TgZ(6,"div",32)(7,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.techPassportFrontFilePath))}),t._uU(8,"remove_red_eye"),t.qZA()()(),t.TgZ(9,"div",29)(10,"div",30)(11,"label",31),t._uU(12),t.ALo(13,"transloco"),t.qZA()(),t.TgZ(14,"div",32)(15,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.techPassportBackFilePath))}),t._uU(16,"remove_red_eye"),t.qZA()()(),t.TgZ(17,"div",29)(18,"div",30)(19,"label",31),t._uU(20),t.ALo(21,"transloco"),t.qZA()(),t.TgZ(22,"div",32)(23,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.transportFrontFilePath))}),t._uU(24,"remove_red_eye"),t.qZA()()(),t.TgZ(25,"div",29)(26,"div",30)(27,"label",31),t._uU(28),t.ALo(29,"transloco"),t.qZA()(),t.TgZ(30,"div",32)(31,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.transportBackFilePath))}),t._uU(32,"remove_red_eye"),t.qZA()()(),t.TgZ(33,"div",29)(34,"div",30)(35,"label",31),t._uU(36),t.ALo(37,"transloco"),t.qZA()(),t.TgZ(38,"div",32)(39,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.transportSideFilePath))}),t._uU(40,"remove_red_eye"),t.qZA()()(),t.TgZ(41,"div",29)(42,"div",30)(43,"label",31),t._uU(44),t.ALo(45,"transloco"),t.qZA()(),t.TgZ(46,"div",32)(47,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.passportFilePath))}),t._uU(48,"remove_red_eye"),t.qZA()()(),t.TgZ(49,"div",29)(50,"div",30)(51,"label",31),t._uU(52),t.ALo(53,"transloco"),t.qZA()(),t.TgZ(54,"div",32)(55,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.driverLicenseFilePath))}),t._uU(56,"remove_red_eye"),t.qZA()()(),t.TgZ(57,"div",29)(58,"div",30)(59,"label",31),t._uU(60),t.ALo(61,"transloco"),t.qZA()(),t.TgZ(62,"div",32)(63,"mat-icon",33),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.preview(l.goodsTransportationLicenseCardFilePath))}),t._uU(64,"remove_red_eye"),t.qZA()()()()}2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,8,"technical_passport")),t.xp6(8),t.Oqu(t.lcZ(13,10,"tech_passport_front")),t.xp6(8),t.Oqu(t.lcZ(21,12,"transport_photo")),t.xp6(8),t.Oqu(t.lcZ(29,14,"transport_back_photo")),t.xp6(8),t.Oqu(t.lcZ(37,16,"transport_side_photo")),t.xp6(8),t.Oqu(t.lcZ(45,18,"passport")),t.xp6(8),t.Oqu(t.lcZ(53,20,"driver_lisense_card")),t.xp6(8),t.Oqu(t.lcZ(61,22,"good_transportation_lisense")))}function ve(e,i){if(1&e&&(t.TgZ(0,"p",18),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(null==n.driver?null:n.driver.phoneNumber)}}function Ze(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.phoneNumber," ")}}function xe(e,i){if(1&e&&(t.TgZ(0,"p",18),t.YNc(1,Ze,2,1,"span",34),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==n.driver?null:n.driver.phoneNumbers)}}let be=(()=>{class e{constructor(n,o,a){this.data=n,this._driverService=o,this._dialog=a,this.getDriver(n)}getDriver(n){this._driverService.get(n).subscribe(o=>{this.driver=o.data})}ngOnInit(){}block(){this._dialog.open(de.R,{minWidth:"20vw",maxWidth:"40vw",minHeight:"42vh",maxHeight:"85vh",data:this.driver.id,autoFocus:!1}).afterClosed().subscribe(()=>{this._dialog.closeAll()})}preview(n){this._dialog.open(ge.E,{minWidth:"60vw",maxWidth:"80vw",minHeight:"60vh",maxHeight:"80vh",data:{keyName:"driver",fileName:n},autoFocus:!1}).afterClosed().subscribe(()=>{})}submit(){}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(j.P),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-detail-agent-driver"]],standalone:!0,features:[t.jDz],decls:76,vars:46,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","leading-5","text-3xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"h-full"],[1,"max-w-md","mx-auto","p-4","mt-3","bg-white","dark:bg-[#1E293BDB]","rounded-lg","shadow-md"],[1,"flex","w-full","justify-between"],[1,"flex"],["src","assets/images/user/user.png","alt","User Image",1,"rounded-full","w-16","h-16","mr-2"],[1,"text-2xl","font-bold"],[1,"text-gray-600"],[1,"flex","justify-end"],["src","assets/images/icons/start.svg","alt","star Image",1,"rounded-full","w-4","h-4","ml-1","mt-1"],[1,"max-w-md","mx-auto","p-4","mt-3","bg-white","rounded-lg","shadow-md"],[1,"mb-5"],[1,"text-2xl","leading-4","font-bold"],[1,"grid","grid-cols-2","gap-4"],[1,"text-xl","leading-4","mb-1"],[1,"font-bold"],["class","grid grid-cols-2 gap-4",4,"ngFor","ngForOf"],["class","grid grid-cols-1 gap-4",4,"ngFor","ngForOf"],[1,"mb-5","flex"],["src","assets/images/icons/telegram.svg","alt","",1,"ml-auto","h-7","w-7"],["class","font-bold",4,"ngIf"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",3,"color"],["mat-flat-button","",1,"",3,"color","click"],[4,"ngIf"],[1,"grid","grid-cols-1","gap-4"],[1,"flex","space-x-4","bg-gray-50","dark:text-black","mt-2","px-4","py-2","rounded-lg"],[1,"w-3/4"],[1,"block","mb-2","font-bold"],[1,"w-1/4","flex","items-center","justify-end"],[1,"h-5","w-5","pointer-events-auto",3,"click"],[4,"ngFor","ngForOf"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",4)(8,"div",5)(9,"div",6)(10,"div",7),t._UZ(11,"img",8),t.TgZ(12,"div")(13,"p",9),t._uU(14),t.qZA(),t.TgZ(15,"p",10),t._uU(16),t.qZA()()(),t.TgZ(17,"div",11)(18,"p",10),t._uU(19," 5.0"),t.qZA(),t._UZ(20,"img",12),t.qZA()()(),t.TgZ(21,"div",13)(22,"div",14)(23,"h2",15),t._uU(24),t.ALo(25,"transloco"),t.qZA()(),t.TgZ(26,"div",16)(27,"div")(28,"p",17),t._uU(29),t.ALo(30,"transloco"),t.qZA(),t.TgZ(31,"p",18),t._uU(32),t.qZA()(),t.TgZ(33,"div")(34,"p",17),t._uU(35),t.ALo(36,"transloco"),t.qZA(),t.TgZ(37,"p",18),t._uU(38),t.ALo(39,"date"),t.qZA()()()(),t.TgZ(40,"div",13)(41,"div",14)(42,"h2",15),t._uU(43),t.ALo(44,"transloco"),t.qZA()(),t.YNc(45,he,26,16,"div",19),t.YNc(46,Ae,65,24,"div",20),t.qZA(),t.TgZ(47,"div",13)(48,"div",21)(49,"h2",15),t._uU(50),t.ALo(51,"transloco"),t.qZA(),t._UZ(52,"img",22),t.qZA(),t.TgZ(53,"div",16)(54,"div")(55,"p",17),t._uU(56),t.ALo(57,"transloco"),t.qZA(),t.YNc(58,ve,2,1,"p",23),t.YNc(59,xe,2,1,"p",23),t.TgZ(60,"p",18),t._uU(61,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d"),t.qZA()(),t.TgZ(62,"div")(63,"p",17),t._uU(64),t.ALo(65,"transloco"),t.qZA(),t.TgZ(66,"p",18),t._uU(67),t.qZA()()()()(),t.TgZ(68,"mat-dialog-actions",7)(69,"div",24)(70,"button",25),t._uU(71),t.ALo(72,"transloco"),t.qZA(),t.TgZ(73,"button",26),t.NdJ("click",function(){return a.submit()}),t._uU(74),t.ALo(75,"transloco"),t.qZA()()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,23,"about_driver")),t.xp6(12),t.AsE("",null==a.driver?null:a.driver.firstName," ",null==a.driver?null:a.driver.lastName,""),t.xp6(2),t.hij("# ",null==a.driver?null:a.driver.id,""),t.xp6(8),t.Oqu(t.lcZ(25,25,"information")),t.xp6(5),t.Oqu(t.lcZ(30,27,"full_name")),t.xp6(3),t.AsE("",null==a.driver?null:a.driver.firstName," ",null==a.driver?null:a.driver.lastName,"\u0447"),t.xp6(3),t.Oqu(t.lcZ(36,29,"subscription")),t.xp6(3),t.Oqu(t.xi3(39,31,null==a.driver?null:a.driver.subscribedAt,"dd/MM/yyyy HH:mm")),t.xp6(5),t.Oqu(t.lcZ(44,34,"transport")),t.xp6(2),t.Q6J("ngForOf",null==a.driver?null:a.driver.driverTransports),t.xp6(1),t.Q6J("ngForOf",null==a.driver?null:a.driver.driverTransports),t.xp6(4),t.hij(" ",t.lcZ(51,36,"driver_contact")," "),t.xp6(6),t.Oqu(t.lcZ(57,38,"phone")),t.xp6(2),t.Q6J("ngIf",null==a.driver?null:a.driver.phoneNumber),t.xp6(1),t.Q6J("ngIf",null==a.driver?null:a.driver.phoneNumbers),t.xp6(5),t.Oqu(t.lcZ(65,40,"email")),t.xp6(3),t.hij(" ",null==a.driver?null:a.driver.email,""),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(72,42,"send_push"),""),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.hij(" ",t.lcZ(75,44,"save")," "))},dependencies:[_.y4,_.Ot,A.uU,J.Co,d.c,v.Ps,v.Hw,C.LD,h.ot,h.lW,h.RK,r.UX,p.Is,p.ZT,p.uh,p.xY,p.H8,r.u5,A.ax,A.O5,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP],styles:[".mat-mdc-dialog-container .mdc-dialog__surface{border-radius:6px 0 0 6px!important;padding:6px!important}.mat-mdc-dialog-content{max-height:83vh;scrollbar-color:#888 #eee;scrollbar-width:thin;padding:0!important}.mat-dialog-content::-webkit-scrollbar{width:2px}.mat-dialog-content::-webkit-scrollbar-thumb{background-color:#888;border-radius:5px}.mat-dialog-content::-webkit-scrollbar-track{background-color:#eee}\n"],encapsulation:2})}return e})();function Te(e,i){1&e&&(t.TgZ(0,"mat-header-cell",18),t._uU(1,"\u2116 "),t.qZA())}function Ce(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.index;t.xp6(1),t.Oqu(n+1)}}function qe(e,i){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"admin")," "))}function we(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==n?null:n.createdBy," ")}}function Ne(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,we,2,1,"span",19),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf","staff"==n.userType)}}function Ue(e,i){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"agent")))}function De(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==n?null:n.createdBy," ")}}function Ie(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,De,2,1,"span",19),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngIf","agent"==n.userType)}}function ye(e,i){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"sum")))}function Le(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.AsE(" ",null==n?null:n.amount," ",null==n?null:n.currencyName," ")}}function Pe(e,i){1&e&&(t.TgZ(0,"mat-header-cell"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"type")))}function Fe(e,i){if(1&e&&(t.TgZ(0,"mat-cell")(1,"span",20),t._uU(2),t.qZA()()),2&e){const n=i.$implicit;t.xp6(2),t.hij(" ",null==n?null:n.transctionType," ")}}function Je(e,i){1&e&&(t.TgZ(0,"mat-header-cell",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"driver")))}function ke(e,i){1&e&&(t.TgZ(0,"span",22),t._uU(1," ID: "),t.qZA())}function Oe(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.YNc(2,ke,2,0,"span",21),t._uU(3),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.user_name," "),t.xp6(1),t.Q6J("ngIf",n.userid),t.xp6(1),t.hij(" ",null==n?null:n.userid," ")}}function Ye(e,i){1&e&&(t.TgZ(0,"mat-header-cell",18),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"date_time")," "))}function Qe(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==n?null:n.createdAt,"YYYY/MM/dd HH:mm")," ")}}function je(e,i){1&e&&t._UZ(0,"mat-header-row")}function Se(e,i){1&e&&t._UZ(0,"mat-row")}const Ee=function(){return[10,20,50,100,200]};let Be=(()=>{class e{constructor(n,o,a){this.data=n,this._agentService=o,this._dialog=a,this.dataSource=new m.by([]),this.displayedColumns=["index","admin","agent","amount","type","driverId","date"]}ngOnInit(){this.getTransactions(this.data)}getTransactions(n){this._agentService.getAgentTransactions(n).subscribe(o=>{this.dataSource.data=o.data,console.log(this.dataSource)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(w),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-agent-transaction"]],viewQuery:function(o,a){if(1&o&&t.Gf(f.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first)}},standalone:!0,features:[t.jDz],decls:32,vars:7,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"dataSource"],["matColumnDef","index"],["class","font-bold",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","admin"],[4,"matHeaderCellDef"],["matColumnDef","agent"],["matColumnDef","amount"],["matColumnDef","type"],["matColumnDef","driverId"],["matColumnDef","date"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"showFirstLastButtons","length","pageSizeOptions"],[1,"font-bold"],[4,"ngIf"],[1,"tw-text-red-500"],["class","tw-mx-2",4,"ngIf"],[1,"tw-mx-2"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"mat-dialog-content")(7,"mat-table",4),t.ynx(8,5),t.YNc(9,Te,2,0,"mat-header-cell",6),t.YNc(10,Ce,2,1,"mat-cell",7),t.BQk(),t.ynx(11,8),t.YNc(12,qe,3,3,"mat-header-cell",9),t.YNc(13,Ne,2,1,"mat-cell",7),t.BQk(),t.ynx(14,10),t.YNc(15,Ue,3,3,"mat-header-cell",9),t.YNc(16,Ie,2,1,"mat-cell",7),t.BQk(),t.ynx(17,11),t.YNc(18,ye,3,3,"mat-header-cell",9),t.YNc(19,Le,2,2,"mat-cell",7),t.BQk(),t.ynx(20,12),t.YNc(21,Pe,3,3,"mat-header-cell",9),t.YNc(22,Fe,3,1,"mat-cell",7),t.BQk(),t.ynx(23,13),t.YNc(24,Je,3,3,"mat-header-cell",6),t.YNc(25,Oe,4,3,"mat-cell",7),t.BQk(),t.ynx(26,14),t.YNc(27,Ye,3,3,"mat-header-cell",6),t.YNc(28,Qe,3,4,"mat-cell",7),t.BQk(),t.YNc(29,je,1,0,"mat-header-row",15),t.YNc(30,Se,1,0,"mat-row",16),t.qZA(),t._UZ(31,"mat-paginator",17),t.qZA()),2&o&&(t.xp6(7),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("showFirstLastButtons",!0)("length",a.dataSource.data.length)("pageSizeOptions",t.DdM(6,Ee)))},dependencies:[_.y4,_.Ot,v.Ps,v.Hw,A.uU,C.LD,h.ot,h.RK,r.UX,p.Is,p.ZT,p.uh,p.xY,r.u5,A.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,c.lN,d.c,x.JX,f.TU,f.NW,g.Tx,Z.rP],encapsulation:2,changeDetection:0})}return e})();const Me=function(e,i){return{"bg-gray-50 dark:text-black":e,"card-background-black text-white":i}};function We(e,i){if(1&e&&(t.TgZ(0,"mat-radio-button",11)(1,"p",12),t._uU(2),t.qZA()()),2&e){const n=i.$implicit,o=t.oxw();t.Q6J("color",o.white)("ngClass",t.WLB(4,Me,!o.form.invalid||!o.form.pristine,o.form.invalid&&o.form.pristine))("value",n.id),t.xp6(2),t.hij("$",null==n?null:n.price,"/\u043c\u0435\u0441\u044f\u0446")}}const He=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button dark":i}};let Ke=(()=>{class e{constructor(n,o,a,l,u,T){this.data=n,this._toaster=o,this._agentService=a,this._typeService=l,this.cdr=u,this._dialog=T,this.edit=!1,this.form=new r.cw({driverId:new r.NI(""),subscriptionId:new r.NI(""),agentId:new r.NI("")}),this.data&&this.form.patchValue({driverId:this.data?.driverId,agentId:this.data?.agentId}),this.getSubscription()}getSubscription(){this._typeService.getSubscription().subscribe(n=>{this.subscription=n.data,this.cdr.detectChanges()})}get f(){return this.form.controls}submit(){this.form.valid?this._agentService.createsubscription(this.form.value).subscribe(n=>{n.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(P._W),t.Y36(w),t.Y36(F.K),t.Y36(t.sBO),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-agent-subscription"]],standalone:!0,features:[t.jDz],decls:19,vars:18,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[3,"formGroup"],["formControlName","subscriptionId",1,"flex","items-center"],["class","w-2/4 m-4 p-4 rounded-lg",3,"color","ngClass","value",4,"ngFor","ngForOf"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],[1,"w-2/4","m-4","p-4","rounded-lg",3,"color","ngClass","value"],[1,"w-40"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content")(8,"form",4)(9,"mat-radio-group",5),t.YNc(10,We,3,7,"mat-radio-button",6),t.qZA()()(),t.TgZ(11,"mat-dialog-actions",7)(12,"div",8)(13,"button",9),t._uU(14),t.ALo(15,"transloco"),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){return a.submit()}),t._uU(17),t.ALo(18,"transloco"),t.qZA()()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,9,"add_subscription")),t.xp6(6),t.Q6J("formGroup",a.form),t.xp6(2),t.Q6J("ngForOf",a.subscription),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(15,11,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(15,He,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(18,13,"save")," "))},dependencies:[_.y4,_.Ot,A.mk,J.Co,A.ax,r.u5,r._Y,r.JJ,r.JL,r.UX,r.sg,r.u,U.Fk,U.VQ,U.U0,N.FA,d.c,v.Ps,v.Hw,C.LD,h.ot,h.lW,h.RK,p.Is,p.ZT,p.uh,p.xY,p.H8,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP],styles:[".mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#42f477!important}.mat-radio-button.mat-accent .mat-radio-inner-circle{color:#f4427d!important;background-color:#42f454!important}.mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#f5060642!important}\n"],encapsulation:2,changeDetection:0})}return e})();var Re=s(8372),$e=s(3900);function ze(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",12),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"first_name")),t.xp6(2),t.Q6J("value",n.driverInfo.firstName)}}function Ge(e,i){if(1&e&&(t.TgZ(0,"mat-form-field",5)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",12),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"last_name")),t.xp6(2),t.Q6J("value",n.driverInfo.lastName)}}const Xe=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button ":i}};let Ve=(()=>{class e{constructor(n,o,a,l,u,T,E){this.data=n,this._toaster=o,this._agentService=a,this._typeService=l,this._dirfverService=u,this.cdr=T,this._dialog=E,this.edit=!1,this.form=new r.cw({driverId:new r.NI(""),agentId:new r.NI("")}),this.data&&this.form.patchValue({agentId:this.data?.agentId}),this.getSubscription()}ngOnInit(){this.form.get("driverId").valueChanges.pipe((0,Re.b)(300),(0,$e.w)(n=>this._dirfverService.get(n))).subscribe(n=>{n.success&&(this.driverInfo=n.data)})}getSubscription(){this._typeService.getSubscription().subscribe(n=>{this.subscription=n.data,this.cdr.detectChanges()})}get f(){return this.form.controls}submit(){this.form.valid?this._agentService.connectToAgent(this.form.value).subscribe(n=>{n.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(P._W),t.Y36(w),t.Y36(F.K),t.Y36(j.P),t.Y36(t.sBO),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-connect-driver"]],standalone:!0,features:[t.jDz],decls:24,vars:22,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"px-3",3,"formGroup"],[1,"flex-auto","gt-xs:pr-3","w-full"],["matInput","","formControlName","driverId"],["class","flex-auto gt-xs:pr-3 w-full",4,"ngIf"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],["matInput","",3,"value"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content")(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t._UZ(13,"input",6),t.qZA(),t.YNc(14,ze,5,4,"mat-form-field",7),t.YNc(15,Ge,5,4,"mat-form-field",7),t.qZA()(),t.TgZ(16,"mat-dialog-actions",8)(17,"div",9)(18,"button",10),t._uU(19),t.ALo(20,"transloco"),t.qZA(),t.TgZ(21,"button",11),t.NdJ("click",function(){return a.submit()}),t._uU(22),t.ALo(23,"transloco"),t.qZA()()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,11,"add_subscription")),t.xp6(6),t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(t.lcZ(12,13,"DriverID")),t.xp6(3),t.Q6J("ngIf",null==a.driverInfo?null:a.driverInfo.firstName),t.xp6(1),t.Q6J("ngIf",null==a.driverInfo?null:a.driverInfo.lastName),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(20,15,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(19,Xe,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(23,17,"save")," "))},dependencies:[_.y4,_.Ot,A.mk,J.Co,r.u5,r._Y,r.Fj,r.JJ,r.JL,r.UX,r.sg,r.u,U.Fk,N.FA,d.c,d.Nt,c.KE,c.hX,v.Ps,v.Hw,C.LD,h.ot,h.lW,h.RK,p.Is,p.ZT,p.uh,p.xY,p.H8,A.O5,m.p0,c.lN,x.JX,f.TU,g.Tx,Z.rP],styles:[".mat-radio-button.mat-accent.mat-radio-checked .mat-radio-outer-circle{border-color:#42f477!important}.mat-radio-button.mat-accent .mat-radio-inner-circle{color:#f4427d!important;background-color:#42f454!important}.mat-radio-button.mat-accent .mat-radio-ripple .mat-ripple-element{background-color:#f5060642!important}\n"],encapsulation:2,changeDetection:0})}return e})();function tn(e,i){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n.id),t.xp6(1),t.Oqu(n.name)}}function en(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"is_empty")," "))}function nn(e,i){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}const an=function(e){return{"is-invalid":e}},on=function(e,i){return{"fuse-mat-button text-white":e,"fuse-mat-button ":i}};let rn=(()=>{class e{constructor(n,o,a,l,u){this.data=n,this._toaster=o,this._agentService=a,this._typeService=l,this._dialog=u,this.edit=!1,this.transactionTypes=["topupAccount","withdrawAccount","secureTransaction","topUpAgentAccount","driverSubscriptionPayment"],this.form=new r.cw({amount:new r.NI("",[r.kI.required]),transactionType:new r.NI("",[r.kI.required]),currencyId:new r.NI("",[r.kI.required]),agentId:new r.NI("",[r.kI.required])}),this.form.patchValue({agentId:Number(n.id)}),this._typeService.getCurrencies().subscribe(T=>{this.currencies=T.data})}get f(){return this.form.controls}submit(){this.form.valid?this._agentService.CreateBalanseAgent(this.form.value).subscribe(n=>{n.success?(this._dialog.closeAll(),this.form.reset(),this._toaster.success("\u0410\u0433\u0435\u043d\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430")):this._toaster.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0430\u0433\u0435\u043d\u0442")}):this._dialog.open(L.q,{width:"500px",height:"450px",data:{text:"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0432\u0432\u0435\u0441\u0442\u0438 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"}})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(p.WI),t.Y36(P._W),t.Y36(w),t.Y36(F.K),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-balance-agent"]],standalone:!0,features:[t.jDz],decls:35,vars:32,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","text-2xl","uppercase"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"px-3",3,"formGroup"],[1,"w-full"],["formControlName","currencyId"],[3,"value",4,"ngFor","ngForOf"],["required","","matInput","","name","amount","type","number","formControlName","amount",3,"ngClass"],[4,"ngIf"],["formControlName","transactionType"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button",3,"color"],["mat-flat-button","",3,"ngClass","color","disabled","click"],[3,"value"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content")(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11),t.ALo(12,"transloco"),t.qZA(),t.TgZ(13,"mat-select",6),t.YNc(14,tn,2,2,"mat-option",7),t.qZA()(),t.TgZ(15,"mat-form-field",5)(16,"mat-label"),t._uU(17),t.ALo(18,"transloco"),t.qZA(),t._UZ(19,"input",8),t.YNc(20,en,3,3,"mat-error",9),t.qZA(),t.TgZ(21,"mat-form-field",5)(22,"mat-label"),t._uU(23),t.ALo(24,"transloco"),t.qZA(),t.TgZ(25,"mat-select",10),t.YNc(26,nn,2,2,"mat-option",7),t.qZA()()()(),t.TgZ(27,"mat-dialog-actions",11)(28,"div",12)(29,"button",13),t._uU(30),t.ALo(31,"transloco"),t.qZA(),t.TgZ(32,"button",14),t.NdJ("click",function(){return a.submit()}),t._uU(33),t.ALo(34,"transloco"),t.qZA()()()),2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,15,"add_agent")),t.xp6(6),t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(t.lcZ(12,17,"currency")),t.xp6(3),t.Q6J("ngForOf",a.currencies),t.xp6(3),t.Oqu(t.lcZ(18,19,"amount")),t.xp6(2),t.Q6J("ngClass",t.VKq(27,an,a.f.amount.errors)),t.xp6(1),t.Q6J("ngIf",null==a.f.amount.errors?null:a.f.amount.errors.required),t.xp6(3),t.Oqu(t.lcZ(24,21,"transactionType")),t.xp6(3),t.Q6J("ngForOf",a.transactionTypes),t.xp6(3),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(31,23,"cancel"),""),t.xp6(2),t.Q6J("ngClass",t.WLB(29,on,a.form.invalid||a.form.pristine,!a.form.invalid&&!a.form.pristine))("color","primary")("disabled",a.form.invalid||a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(34,25,"save")," "))},dependencies:[_.y4,_.Ot,A.ax,d.c,d.Nt,c.KE,c.hX,c.TO,v.Ps,v.Hw,C.LD,C.gD,W.ey,h.ot,h.lW,h.RK,r.UX,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.Q7,r.sg,r.u,p.Is,p.ZT,p.uh,p.xY,p.H8,r.u5,A.O5,m.p0,A.mk,c.lN,x.JX,f.TU,g.Tx,Z.rP],encapsulation:2,changeDetection:0})}return e})();var ln=s(3045),sn=s(6530);function cn(e,i){if(1&e&&(t.TgZ(0,"div",30)(1,"div",31)(2,"div",32),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t.TgZ(5,"div",32)(6,"span"),t._uU(7),t.qZA(),t._uU(8,": "),t.TgZ(9,"span"),t._uU(10),t.qZA()()(),t.TgZ(11,"div",31)(12,"div",32),t._uU(13),t.ALo(14,"transloco"),t.qZA(),t.TgZ(15,"div",32)(16,"span"),t._uU(17),t.qZA(),t._uU(18,": "),t.TgZ(19,"span"),t._uU(20),t.qZA()()()()),2&e){const n=i.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,6,"active_balance")),t.xp6(4),t.Oqu(null==n?null:n.currencyname),t.xp6(3),t.Oqu(null==n?null:n.activebalance),t.xp6(3),t.Oqu(t.lcZ(14,8,"frozen_balance")),t.xp6(4),t.Oqu(null==n?null:n.currencyname),t.xp6(3),t.Oqu(null==n?null:n.frozenbalance)}}function mn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.connect())}),t.TgZ(1,"span",34),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}2&e&&(t.Q6J("color","primary"),t.xp6(2),t.Oqu(t.lcZ(3,2,"connect_driver")))}function un(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.transaction())}),t.TgZ(1,"span",34),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}2&e&&(t.Q6J("color","primary"),t.xp6(2),t.Oqu(t.lcZ(3,2,"transaction")))}function pn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.addBalanse())}),t.TgZ(1,"span",34),t._uU(2),t.ALo(3,"transloco"),t.qZA()()}2&e&&(t.Q6J("color","primary"),t.xp6(2),t.Oqu(t.lcZ(3,2,"balance")))}function dn(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1," No "),t.qZA())}function gn(e,i){if(1&e&&(t.TgZ(0,"mat-cell",36),t._uU(1),t.qZA()),2&e){const n=i.index;t.xp6(1),t.hij(" ",n+1," ")}}function _n(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1," ID "),t.qZA())}function fn(e,i){if(1&e&&(t.TgZ(0,"mat-cell",36),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.id," ")}}function hn(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"full_name")," "))}function An(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.AsE(" ",null==n?null:n.firstName," ",null==n?null:n.lastName," ")}}function vn(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"phone")," "))}function Zn(e,i){if(1&e&&(t.TgZ(0,"span",38),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.phoneNumber," ")}}function xn(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t.YNc(1,Zn,2,1,"span",37),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("ngForOf",n.phoneNumbers)}}function bn(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"register_date")," "))}function Tn(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==n?null:n.createdAt,"dd/MM/yyyy HH:mm")," ")}}function Cn(e,i){1&e&&(t.TgZ(0,"mat-header-cell",35),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&e&&(t.xp6(1),t.hij("",t.lcZ(2,1,"last_enter")," "))}function qn(e,i){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.last_inter," ")}}function wn(e,i){1&e&&t._UZ(0,"mat-header-cell")}function Nn(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-cell")(1,"div",39)(2,"button",40),t.NdJ("click",function(a){return a.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,41)(7,"button",42),t.NdJ("click",function(){const l=t.CHM(n).$implicit,u=t.oxw();return t.KtG(u.detail(l.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"remove_red_eye"),t.qZA(),t._uU(10),t.ALo(11,"transloco"),t.qZA()()()()}if(2&e){const n=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",n),t.xp6(8),t.hij(" ",t.lcZ(11,2,"detail")," ")}}function Un(e,i){1&e&&t._UZ(0,"mat-header-row")}function Dn(e,i){1&e&&t._UZ(0,"mat-row")}function In(e,i){1&e&&t._UZ(0,"app-no-data-placeholder",43)}const yn=function(){return[10,20,50,100,200]},Ln=[{path:"",component:Xt,resolve:{}},{path:":id",component:(()=>{class e{constructor(n,o,a,l,u){this._router=n,this._permissionService=o,this.utilsService=a,this._agentService=l,this._dialog=u,this.cities=[],this.pageParams={agentId:0,page:0,limit:10,perPage:10,totalPagesCount:1,sortBy:"id",sortType:"desc"},this.displayedColumns=["index","id","full_name","phone","register_date","last_enter","actions"],this.dataSource=new m.by([]),this._router.params.subscribe(T=>{this.id=T.id,this.pageParams.agentId=T.id})}ngOnInit(){this.getAllAgentsDrivers(this.pageParams),this.getBalance(this.id)}hasPermission(n){return this.utilsService.hasPermission(n)}getAllAgentsDrivers(n){this._agentService.getAllByAgent(n).subscribe(o=>{this.dataSource.data=o?.data,this.pageParams.totalPagesCount=o?.data.totalPagesCount})}onPageChange(n){this.pageParams.pageSize=n.pageSize,this.pageParams.page=n.pageIndex,this.getAllAgentsDrivers(this.pageParams)}getBalance(n){this._agentService.getAgentbalance(n).subscribe(o=>{this.balances=o?.data})}detail(n){this._dialog.open(be,{width:"500px",height:"100vh",autoFocus:!1,data:n,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}connect(){this._dialog.open(Ve,{minWidth:"25vw",maxWidth:"40vw",minHeight:"30vh",maxHeight:"60vh",data:{agentId:this.id}}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}transaction(){this._dialog.open(Be,{minWidth:"70vw",maxWidth:"90vw",minHeight:"60vh",maxHeight:"80vh",data:this.id,autoFocus:!1}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}add(){this._dialog.open(pe,{minWidth:"45vw",maxWidth:"60vw",minHeight:"60vh",maxHeight:"80vh",autoFocus:!1,data:{id:this.id}}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}addBalanse(){this._dialog.open(rn,{minWidth:"35vw",maxWidth:"50vw",minHeight:"50vh",maxHeight:"80vh",autoFocus:!1,data:{id:this.id}}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}addSubsciption(n){this._dialog.open(Ke,{minWidth:"35vw",maxWidth:"40vw",minHeight:"30vh",maxHeight:"40vh",autoFocus:!1,data:{agentId:this.id,driverId:n}}).afterClosed().subscribe(()=>{this.getAllAgentsDrivers(this.id)})}delete(n){this._agentService.delete(n).subscribe(()=>{this.getAllAgentsDrivers(this.id)})}static#t=this.\u0275fac=function(o){return new(o||e)(t.Y36(Q.gz),t.Y36(ln.YI),t.Y36(sn.I),t.Y36(w),t.Y36(p.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-agent-driver-list"]],viewQuery:function(o,a){if(1&o&&t.Gf(f.NW,5),2&o){let l;t.iGM(l=t.CRH())&&(a.paginator=l.first)}},standalone:!0,features:[t.jDz],decls:60,vars:35,consts:[[1,"flex","flex-col","flex-auto"],[1,"flex-auto"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","ml-6"],["class","flex flex-row ",4,"ngFor","ngForOf"],["class","fuse-mat-button-large  ml-3","mat-flat-button","",3,"color","click",4,"ngIf"],[1,"flex","items-baseline","w-full"],["color","accent",1,"w-50","px-1"],["matInput","",3,"placeholder"],[1,"px-1"],["mat-flat-button","","color","warn",1,""],["mat-flat-button","","color","warn"],[1,"mt-4","shadow-table"],["matSort","",3,"dataSource"],["matColumnDef","index"],["class","font-bold",4,"matHeaderCellDef"],["class","index-column",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","full_name"],[4,"matCellDef"],["matColumnDef","phone"],["matColumnDef","register_date"],["matColumnDef","last_enter"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["class","m-1",4,"ngIf"],[3,"showFirstLastButtons","length","pageSize","pageIndex","pageSizeOptions","page"],[1,"flex","flex-row"],[1,"mx-3","text-center"],[1,"text-sm","font-semibold"],["mat-flat-button","",1,"hidden","sm:inline-flex","ml-3",3,"color","click"],[1,"ml-2"],[1,"font-bold"],[1,"index-column"],["class","px-2",4,"ngFor","ngForOf"],[1,"px-2"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"],[1,"m-1"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5),t.ALo(6,"transloco"),t.qZA()(),t.TgZ(7,"div",4),t.YNc(8,cn,21,10,"div",5),t.YNc(9,mn,4,4,"button",6),t.YNc(10,un,4,4,"button",6),t.YNc(11,pn,4,4,"button",6),t.qZA()(),t.TgZ(12,"div",7)(13,"mat-form-field",8),t._UZ(14,"input",9),t.ALo(15,"transloco"),t.qZA(),t.TgZ(16,"mat-form-field",8),t._UZ(17,"input",9),t.ALo(18,"transloco"),t.qZA(),t.TgZ(19,"mat-form-field",8),t._UZ(20,"input",9),t.ALo(21,"transloco"),t.qZA(),t.TgZ(22,"mat-form-field",8),t._UZ(23,"input",9),t.ALo(24,"transloco"),t.qZA(),t.TgZ(25,"div",10)(26,"button",11),t._uU(27),t.ALo(28,"transloco"),t.qZA()(),t.TgZ(29,"div",10)(30,"button",12),t._uU(31),t.ALo(32,"transloco"),t.qZA()()(),t.TgZ(33,"div",13)(34,"mat-table",14),t.ynx(35,15),t.YNc(36,dn,2,0,"mat-header-cell",16),t.YNc(37,gn,2,1,"mat-cell",17),t.BQk(),t.ynx(38,18),t.YNc(39,_n,2,0,"mat-header-cell",16),t.YNc(40,fn,2,1,"mat-cell",17),t.BQk(),t.ynx(41,19),t.YNc(42,hn,3,3,"mat-header-cell",16),t.YNc(43,An,2,2,"mat-cell",20),t.BQk(),t.ynx(44,21),t.YNc(45,vn,3,3,"mat-header-cell",16),t.YNc(46,xn,2,1,"mat-cell",20),t.BQk(),t.ynx(47,22),t.YNc(48,bn,3,3,"mat-header-cell",16),t.YNc(49,Tn,3,4,"mat-cell",20),t.BQk(),t.ynx(50,23),t.YNc(51,Cn,3,3,"mat-header-cell",16),t.YNc(52,qn,2,1,"mat-cell",20),t.BQk(),t.ynx(53,24),t.YNc(54,wn,1,0,"mat-header-cell",25),t.YNc(55,Nn,12,4,"mat-cell",20),t.BQk(),t.YNc(56,Un,1,0,"mat-header-row",26),t.YNc(57,Dn,1,0,"mat-row",27),t.qZA(),t.YNc(58,In,1,0,"app-no-data-placeholder",28),t.TgZ(59,"mat-paginator",29),t.NdJ("page",function(u){return a.onPageChange(u)}),t.qZA()()()()),2&o&&(t.xp6(5),t.Oqu(t.lcZ(6,20,"drivers")),t.xp6(3),t.Q6J("ngForOf",a.balances),t.xp6(1),t.Q6J("ngIf",a.hasPermission("attachDriverAgent")),t.xp6(1),t.Q6J("ngIf",a.hasPermission("seeSubscriptionTransactionAgent")),t.xp6(1),t.Q6J("ngIf",a.hasPermission("addBalanceAgent")),t.xp6(3),t.s9C("placeholder",t.lcZ(15,22,"id")),t.xp6(3),t.s9C("placeholder",t.lcZ(18,24,"name")),t.xp6(3),t.s9C("placeholder",t.lcZ(21,26,"phone")),t.xp6(3),t.s9C("placeholder",t.lcZ(24,28,"register_date")),t.xp6(4),t.hij(" ",t.lcZ(28,30,"clear"),""),t.xp6(4),t.hij(" ",t.lcZ(32,32,"filter"),""),t.xp6(3),t.Q6J("dataSource",a.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("ngIf",!a.dataSource.data.length),t.xp6(1),t.Q6J("showFirstLastButtons",!0)("length",a.pageParams.totalPagesCount-1)("pageSize",a.pageParams.limit)("pageIndex",a.pageParams.page)("pageSizeOptions",t.DdM(34,yn)))},dependencies:[_.y4,_.Ot,A.uU,v.Ps,v.Hw,C.LD,c.KE,B.o,h.ot,h.lW,h.RK,A.ax,A.O5,m.p0,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,c.lN,d.c,d.Nt,x.JX,x.YE,f.TU,f.NW,g.Tx,g.VK,g.OP,g.p6,Z.rP],encapsulation:2,changeDetection:0})}return e})(),resolve:{}}]},6133:(y,b,s)=>{s.d(b,{P:()=>f});var A=s(2689),Z=s(3144),h=s(2223),v=s(8615),_=s(8236);let f=(()=>{class x{constructor(d,c){this._apiService=d,this._authService=c}get(d){let c=new Z.LE,g=this._authService.getDecodedAccessToken().userId;return c=c.append("id",d),c=c.append("userId",g),this._apiService.get("/users/drivers/driver-by",c)}getAll(d){return this._apiService.get("/users/drivers/all-drivers",(0,A.$)(d))}create(d){return this._apiService.post("/users/drivers/register",d)}createTransport(d){return this._apiService.post("/users/driver/transport",d)}updateTransport(d){return this._apiService.put("/users/driver/transport",d)}updateTransportDriver(d){return this._apiService.post("/users/driver/transport/to-verification",d)}getTransportWithDriver(d,c){let g=new Z.LE;return g=g.append("driverId",d),g=g.append("transportId",c),this._apiService.get("/users/driver/transport",g)}update(d){return d.phoneNumbers=[d.phoneNumbers],this._apiService.put("/users/drivers/",d)}block(d,c){let g=new Z.LE;return g=g.append("id",d),this._apiService.patch("/users/drivers/block-driver",c,g)}active(d){let c=new Z.LE;return c=c.append("id",d),this._apiService.patch("/users/drivers/unblock-driver",{},c)}delete(d){let c=new Z.LE;return c=c.append("id",d),this._apiService.delete("/users/drivers",c)}static#t=this.\u0275fac=function(c){return new(c||x)(h.LFG(v.s),h.LFG(_.e))};static#e=this.\u0275prov=h.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})}return x})()},943:(y,b,s)=>{s.d(b,{E:()=>x});var A=s(4755),Z=s(6286),h=s(430),v=s(7361),_=s(2223),f=s(4973);let x=(()=>{class m{constructor(c,g){this.data=c,this.dialog=g,this.image="",this.keyName="",this.fileName="",this.file_url="",console.log(this.data),this.keyName=this.data.keyName,this.fileName=this.data.fileName}static#t=this.\u0275fac=function(g){return new(g||m)(_.Y36(Z.WI),_.Y36(Z.uw))};static#e=this.\u0275cmp=_.Xpm({type:m,selectors:[["app-image-priview"]],standalone:!0,features:[_.jDz],decls:11,vars:6,consts:[[2,"height","calc(100% - 100px)"],[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","leading-5","text-3xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"w-full","flex","items-center","justify-center"],["alt","",1,"object-fill","w-full",3,"src"]],template:function(g,D){1&g&&(_.TgZ(0,"div",0)(1,"div",1),_._UZ(2,"p",2),_.TgZ(3,"button",3)(4,"mat-icon",4),_._uU(5,"close"),_.qZA()()(),_.TgZ(6,"mat-dialog-content")(7,"div",5),_._UZ(8,"img",6),_.ALo(9,"async"),_.ALo(10,"fileFetch"),_.qZA()()()),2&g&&(_.xp6(8),_.Q6J("src",_.lcZ(9,1,_.xi3(10,3,D.fileName,D.keyName)),_.LSH))},dependencies:[v.d,f.z,A.Ov,Z.Is,Z.ZT,Z.uh,Z.xY,h.Ps,h.Hw]})}return m})()},4250:(y,b,s)=>{s.d(b,{q:()=>x});var A=s(3223),Z=s(9401),h=s(1728),v=s(6286),_=s(5707),f=s(2223);let x=(()=>{class m{constructor(c,g){this.data=c,this.dialogRef=g}static#t=this.\u0275fac=function(g){return new(g||m)(f.Y36(v.WI),f.Y36(v.so))};static#e=this.\u0275cmp=f.Xpm({type:m,selectors:[["app-message"]],standalone:!0,features:[f.jDz],decls:6,vars:1,consts:[[1,"flex","justify-center","mt-4","mb-3","px-2"],["src","assets/images/icons/info-yellow.svg","alt","info",1,"w-48","h-48"],[1,"flex","justify-center","px-2","mb-8"],[1,"font-bold","text-6xl","text-center","leading-7"]],template:function(g,D){1&g&&(f.TgZ(0,"mat-dialog-content")(1,"div",0),f._UZ(2,"img",1),f.qZA(),f.TgZ(3,"div",2)(4,"p",3),f._uU(5),f.qZA()()()),2&g&&(f.xp6(5),f.Oqu(null==D.data?null:D.data.text))},dependencies:[A.Su,Z.u5,v.Is,v.xY,_.y4,h.ot],encapsulation:2,changeDetection:0})}return m})()},4973:(y,b,s)=>{s.d(b,{z:()=>h});var A=s(2223),Z=s(3817);let h=(()=>{class v{constructor(f){this.fileService=f}transform(f,x){return console.log(x,f),this.fileService.getFileUrl(x,f)}static#t=this.\u0275fac=function(x){return new(x||v)(A.Y36(Z.W,16))};static#e=this.\u0275pipe=A.Yjl({name:"fileFetch",type:v,pure:!0})}return v})()},7361:(y,b,s)=>{s.d(b,{d:()=>h});var A=s(4755),Z=s(2223);let h=(()=>{class v{static#t=this.\u0275fac=function(x){return new(x||v)};static#e=this.\u0275mod=Z.oAB({type:v});static#n=this.\u0275inj=Z.cJS({imports:[A.ez]})}return v})()},3817:(y,b,s)=>{s.d(b,{W:()=>_});var A=s(9502),Z=s(4004),h=s(2223),v=s(3144);let _=(()=>{class f{constructor(m){this.http=m}getFileUrl(m,d){return console.log(m,d),this.http.get(A.O.references+`/references/files/${m}/${d}`,{responseType:"blob"}).pipe((0,Z.U)(c=>(console.log(c),URL.createObjectURL(c))))}downloadImage(m,d){return this.http.get(A.O.references+`/references/files/${m}/${d}`,{responseType:"blob"}).subscribe(c=>{const g=document.createElement("a");g.href=URL.createObjectURL(c),g.download=Date.now()+".jpg",document.body.appendChild(g),g.click(),document.body.removeChild(g)},c=>{console.error("Error downloading the image: ",c.error.message)})}static#t=this.\u0275fac=function(d){return new(d||f)(h.LFG(v.eN))};static#e=this.\u0275prov=h.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()}}]);