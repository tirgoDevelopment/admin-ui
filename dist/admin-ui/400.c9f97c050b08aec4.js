"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[400],{9400:(ne,U,i)=>{i.r(U),i.d(U,{default:()=>Xt});var C=i(4755),l=i(9401),p=i(1728),m=i(9114),g=i(430),x=i(7406),d=i(3627),v=i(6702),F=i(5656),I=i(8995),A=i(1292),s=i(6286),f=i(9609),y=i(8467),_=i(787),L=i(3844),h=i(8280),t=i(2223);let M=(()=>{class o{constructor(e){this.dialogRef=e}ngOnInit(){}closeModal(){this.dialogRef.close("close")}accepted(){this.dialogRef.close("accept")}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(s.so))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["agreement"]],standalone:!0,features:[t.jDz],decls:10,vars:1,consts:[[1,"overflow-auto"],["align","end"],["svgIcon","heroicons_outline:x-mark",1,"cursor-pointer",3,"click"],[1,"text-center"],[1,"text-3xl","font-bold","mb-5"],["mat-flat-button","",1,"fuse-mat-button-large","dark","mt-6","w-full",3,"color","click"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.NdJ("click",function(){return r.closeModal()}),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4),t._uU(5,"\u0421\u041e\u0413\u041b\u0410\u0428\u0415\u041d\u0418\u0415"),t.qZA()(),t.TgZ(6,"div",3),t._uU(7," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. "),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return r.accepted()}),t._uU(9,"\u041f\u0440\u0438\u043d\u044f\u0442\u044c "),t.qZA()()),2&a&&(t.xp6(8),t.Q6J("color","primary"))},dependencies:[h.FA,_.LD,I.Bb,s.Is,l.u5,l.UX,m.lN,f.c,p.ot,p.lW,g.Ps,g.Hw,A.p9,y.Cq],encapsulation:2,data:{animation:L.L}})}return o})();var k=i(4128),E=i(8372),Y=i(3900),Z=i(5707),q=i(3144),S=i(2689),T=i(9502);let N=(()=>{class o{constructor(e){this.http=e}getOrders(e){return this.http.get(T.O.orderApiUrl+"/orders/staffs/all-orders",{params:(0,S.$)(e)})}getOrderById(e){let a=new q.LE;return a=a.append("orderId",e),this.http.get(T.O.orderApiUrl+"/orders/staffs/order-by-id",{params:a})}createOrder(e){return this.http.post(T.O.orderApiUrl+"/orders/staffs",e)}cancelOrder(e){let a=new q.LE;return a=a.append("id",e),this.http.post(T.O.orderApiUrl+"/orders/staffs/cancel-order",{},{params:a})}updateOrder(e){return this.http.put(T.O.orderApiUrl+"/orders/staffs/update-order",e)}static#t=this.\u0275fac=function(a){return new(a||o)(t.LFG(q.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var J=i(2621),D=i(8501),P=i(2334),B=i(3648),b=i(1217);function j(o,n){1&o&&t._UZ(0,"div")}function K(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-icon",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousStep())}),t.qZA()}}function W(o,n){if(1&o&&(t.TgZ(0,"mat-form-field",20)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",38),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"first_name")),t.xp6(2),t.Q6J("value",e.clientInfo.firstName)}}function H(o,n){if(1&o&&(t.TgZ(0,"mat-form-field",20)(1,"mat-label"),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t._UZ(4,"input",38),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,2,"last_name")),t.xp6(2),t.Q6J("value",e.clientInfo.lastName)}}function R(o,n){if(1&o&&(t.TgZ(0,"div",39)(1,"mat-form-field",39)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",40)(5,"mat-icon",22),t.qZA()()),2&o){const e=n.$implicit,a=t.oxw(2);t.xp6(3),t.Oqu(a.getDynamicLabel(e)),t.xp6(1),t.Q6J("formControlName",e),t.xp6(1),t.Q6J("svgIcon","heroicons_solid:map-pin")}}function $(o,n){if(1&o&&(t.TgZ(0,"div")(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),t._uU(4,"\u0414\u0430\u0442\u0430 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t._UZ(5,"mat-datepicker-toggle",16)(6,"input",17)(7,"mat-datepicker",null,18),t.qZA()(),t.TgZ(9,"div",19)(10,"mat-form-field",20)(11,"mat-label"),t._uU(12,"\u041c\u0435\u0441\u0442\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t._UZ(13,"input",21)(14,"mat-icon",22),t.qZA(),t.TgZ(15,"mat-form-field",20)(16,"mat-label"),t._uU(17,"\u041c\u0435\u0441\u0442\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t._UZ(18,"input",23)(19,"mat-icon",22),t.qZA()(),t.TgZ(20,"div",19)(21,"mat-form-field")(22,"mat-label"),t._uU(23,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443"),t.qZA(),t.TgZ(24,"mat-select",24)(25,"mat-option",25),t._uU(26,"\u041c\u0435\u0441\u0442\u043e \u0437\u0430\u0442\u0430\u043c\u043e\u0436\u043a\u0438"),t.qZA(),t.TgZ(27,"mat-option",26),t._uU(28,"\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0441\u0442\u0430\u043c\u043e\u0436\u043a\u0438"),t.qZA(),t.TgZ(29,"mat-option",27),t._uU(30,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(31,"mat-option",28),t._uU(32,"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u0432\u044b\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA()()(),t.TgZ(33,"mat-form-field",20)(34,"mat-label"),t._uU(35),t.ALo(36,"transloco"),t.qZA(),t._UZ(37,"input",29),t.qZA(),t.YNc(38,W,5,4,"mat-form-field",30),t.YNc(39,H,5,4,"mat-form-field",30),t.qZA(),t.TgZ(40,"div",31),t.YNc(41,R,6,3,"div",32),t.qZA(),t._UZ(42,"hr"),t.TgZ(43,"div",33)(44,"mat-checkbox",34),t._uU(45,"ADR (\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0430 \u043e\u043f\u0430\u0441\u043d\u044b\u0445 \u0433\u0440\u0443\u0437\u043e\u0432)"),t.qZA(),t.TgZ(46,"mat-checkbox",35),t._uU(47,"Carnet TIR"),t.qZA(),t.TgZ(48,"mat-checkbox",36),t._uU(49,"\u0413\u041b\u041e\u041d\u0410\u0421\u0421"),t.qZA(),t.TgZ(50,"mat-checkbox",37),t._uU(51,"\u041f\u0430\u0440\u043e\u043c\u043e\u043c"),t.qZA()()()),2&o){const e=t.MAs(8),a=t.oxw();t.xp6(5),t.Q6J("for",e),t.xp6(1),t.Q6J("matDatepicker",e),t.xp6(8),t.Q6J("svgIcon","heroicons_solid:map-pin"),t.xp6(5),t.Q6J("svgIcon","heroicons_solid:map-pin"),t.xp6(16),t.Oqu(t.lcZ(36,8,"client")),t.xp6(3),t.Q6J("ngIf",null==a.clientInfo?null:a.clientInfo.firstName),t.xp6(1),t.Q6J("ngIf",null==a.clientInfo?null:a.clientInfo.lastName),t.xp6(2),t.Q6J("ngForOf",a.form.get("selectedLocations").value)}}function G(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function V(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function z(o,n){if(1&o&&(t.TgZ(0,"div")(1,"div",41)(2,"mat-form-field",42)(3,"mat-label"),t._uU(4,"\u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u0430\u044f \u0446\u0435\u043d\u0430"),t.qZA(),t._UZ(5,"input",43),t.TgZ(6,"mat-select",44),t.YNc(7,G,2,2,"mat-option",45),t.qZA()(),t.TgZ(8,"mat-form-field",42)(9,"mat-label"),t._uU(10,"\u0410\u0432\u0430\u043d\u0441"),t.qZA(),t._UZ(11,"input",46),t.TgZ(12,"mat-select",47),t.YNc(13,V,2,2,"mat-option",45),t.qZA()()(),t.TgZ(14,"div",41)(15,"mat-form-field",42)(16,"mat-label"),t._uU(17,"\u0421\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"),t.qZA(),t.TgZ(18,"mat-select",48)(19,"mat-option",49),t._uU(20,"\u041d\u0430\u043b\u0438\u0447\u0438"),t.qZA(),t.TgZ(21,"mat-option",50),t._uU(22,"\u0411\u0435\u0437\u043d\u0430\u043b\u0438\u0447\u043d\u044b\u0435"),t.qZA()()(),t.TgZ(23,"mat-checkbox",51),t._uU(24,"\u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0430\u044f \u0441\u0434\u0435\u043b\u043a\u0430"),t.qZA()()()),2&o){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.currencies),t.xp6(6),t.Q6J("ngForOf",e.currencies),t.xp6(5),t.Q6J("compareWith",e.compareFin)}}function X(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function tt(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function et(o,n){1&o&&(t.TgZ(0,"div",41)(1,"mat-form-field",42)(2,"mat-label"),t._uU(3,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0430\u0432\u0442\u043e\u0432\u043e\u0437"),t.qZA(),t._UZ(4,"input",69),t.qZA()())}function ot(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"mat-checkbox",70),t.NdJ("change",function(r){t.CHM(e);const u=t.oxw(2);return t.KtG(u.onCheckboxChange(r))}),t._uU(2,"\u0420\u0435\u0436\u0438\u043c"),t.qZA(),t.TgZ(3,"mat-checkbox",71),t._uU(4,"\u041a\u0440\u044e\u043a"),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.isRefrigeratorMode)}}function at(o,n){1&o&&(t.TgZ(0,"div",72)(1,"mat-form-field",73)(2,"mat-label"),t._uU(3),t.ALo(4,"transloco"),t.qZA(),t._UZ(5,"input",74),t.qZA(),t.TgZ(6,"mat-form-field",73)(7,"mat-label"),t._uU(8),t.ALo(9,"transloco"),t.qZA(),t._UZ(10,"input",75),t.qZA()()),2&o&&(t.xp6(3),t.Oqu(t.lcZ(4,2,"mode_from")),t.xp6(5),t.Oqu(t.lcZ(9,4,"mode_to")))}function nt(o,n){1&o&&(t.TgZ(0,"div",41)(1,"mat-form-field",42)(2,"mat-label"),t._uU(3,"\u041e\u0431\u044a\u0435\u043c(\u043b)"),t.qZA(),t._UZ(4,"input",76),t.qZA()())}function rt(o,n){1&o&&(t.TgZ(0,"div",41)(1,"mat-form-field",42)(2,"mat-label"),t._uU(3,"\u041e\u0431\u044a\u0435\u043c(\u0444)"),t.qZA(),t.TgZ(4,"mat-select",77)(5,"mat-option",52),t._uU(6,"20"),t.qZA(),t.TgZ(7,"mat-option",52),t._uU(8,"40"),t.qZA(),t.TgZ(9,"mat-option",52),t._uU(10,"60"),t.qZA(),t.TgZ(11,"mat-option",52),t._uU(12,"\u0412\u044b\u0441\u043e\u043a\u0438\u0439 \u043a\u0443\u0431"),t.qZA()()()()),2&o&&(t.xp6(4),t.Q6J("value","EU"),t.xp6(1),t.Q6J("value","20"),t.xp6(2),t.Q6J("value","40"),t.xp6(2),t.Q6J("value","60"),t.xp6(2),t.Q6J("value","high"))}function it(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ut(o,n){if(1&o&&(t.TgZ(0,"mat-optgroup",78),t.YNc(1,it,2,2,"mat-option",45),t.qZA()),2&o){const e=n.$implicit;t.Q6J("label",e.name),t.xp6(1),t.Q6J("ngForOf",e.cargoTypes)}}function lt(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function ct(o,n){if(1&o&&(t.TgZ(0,"mat-option",52),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function st(o,n){if(1&o&&(t.TgZ(0,"div")(1,"div",41)(2,"mat-form-field",42)(3,"mat-label"),t._uU(4,"\u0422\u0438\u043f \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(5,"mat-select",53),t.YNc(6,X,2,2,"mat-option",45),t.qZA()(),t.TgZ(7,"mat-form-field",42)(8,"mat-label"),t._uU(9,"\u0412\u0438\u0434 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u0430"),t.qZA(),t.TgZ(10,"mat-select",54),t.YNc(11,tt,2,2,"mat-option",45),t.qZA()()(),t.YNc(12,et,5,0,"div",55),t.YNc(13,ot,5,1,"div",1),t.YNc(14,at,11,6,"div",56),t.YNc(15,nt,5,0,"div",55),t.YNc(16,rt,13,5,"div",55),t.TgZ(17,"div",41)(18,"mat-form-field",42)(19,"mat-label"),t._uU(20,"\u0422\u0438\u043f \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t.TgZ(21,"mat-select",57),t.YNc(22,ut,2,2,"mat-optgroup",58),t.qZA()(),t.TgZ(23,"mat-form-field",42)(24,"mat-label"),t._uU(25,"\u0412\u0435\u0441 \u0433\u0440\u0443\u0437\u0430(\u0431\u0440\u0443\u0442\u0442\u043e)"),t.qZA(),t._UZ(26,"input",59),t.qZA(),t.TgZ(27,"mat-form-field",42)(28,"mat-label"),t._uU(29,"\u041a\u0443\u0431\u0430\u0442\u0443\u0440\u0430"),t.qZA(),t._UZ(30,"input",60),t.qZA()(),t.TgZ(31,"div",61)(32,"div",62),t._uU(33,"\u0413\u0430\u0431\u0430\u0440\u0438\u0442\u044b \u0433\u0440\u0443\u0437\u0430"),t.qZA(),t.TgZ(34,"div",63)(35,"mat-form-field",61),t._UZ(36,"input",64),t.qZA(),t.TgZ(37,"mat-form-field",61),t._UZ(38,"input",65),t.qZA(),t.TgZ(39,"mat-form-field",61),t._UZ(40,"input",66),t.qZA()()(),t.TgZ(41,"div",41)(42,"mat-form-field",42)(43,"mat-label"),t._uU(44,"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438"),t.qZA(),t.TgZ(45,"mat-select",67),t.YNc(46,lt,2,2,"mat-option",45),t.qZA()(),t.TgZ(47,"mat-form-field",42)(48,"mat-label"),t._uU(49,"\u0423\u043f\u0430\u043a\u043e\u0432\u043a\u0430"),t.qZA(),t.TgZ(50,"mat-select",68),t.YNc(51,ct,2,2,"mat-option",45),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(5),t.Q6J("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngForOf",e.transportTypes),t.xp6(4),t.Q6J("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngForOf",e.transportKinds),t.xp6(1),t.Q6J("ngIf",e.isAutotransport),t.xp6(1),t.Q6J("ngIf",e.isRefrigerator),t.xp6(1),t.Q6J("ngIf",e.isRefrigeratorMode),t.xp6(1),t.Q6J("ngIf",e.isCistern),t.xp6(1),t.Q6J("ngIf",e.isContainer),t.xp6(5),t.Q6J("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngForOf",e.cargoTypes)("ngForTrackBy",e.group),t.xp6(23),t.Q6J("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngForOf",e.cargoLoadingMethods),t.xp6(4),t.Q6J("compareWith",e.compareFn),t.xp6(1),t.Q6J("ngForOf",e.packagesTypes)}}function dt(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),t.qZA())}function mt(o,n){1&o&&t._UZ(0,"mat-progress-spinner",81),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}function pt(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextStep())}),t.YNc(1,dt,2,0,"span",1),t.YNc(2,mt,1,2,"mat-progress-spinner",80),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.loading)("color","primary"),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("ngIf",e.loading)}}function gt(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),t.qZA())}function ft(o,n){1&o&&t._UZ(0,"mat-progress-spinner",81),2&o&&t.Q6J("diameter",24)("mode","indeterminate")}function _t(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.createOrder())}),t.YNc(1,gt,2,0,"span",1),t.YNc(2,ft,1,2,"mat-progress-spinner",80),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.loading)("color","primary"),t.xp6(1),t.Q6J("ngIf",!e.loading),t.xp6(1),t.Q6J("ngIf",e.loading)}}let w=(()=>{class o{constructor(e,a,r,u,c,te,ee,oe,ae){this.dialogRef=e,this.formBuilder=a,this._orderService=r,this._typesService=u,this._clientService=c,this._countryService=te,this.toastr=ee,this.dialog=oe,this.data=ae,this.inputVisited=!1,this.prefixes=["Mr.","Mrs.","Ms.","Dr.","Prof."],this.loading=!1,this.findList=[],this.viewText=!1,this.currentStep=1,this.isRefrigeratorMode=!1,this.data&&this.getOrderById(this.data.id)}onInputFocus(){this.inputVisited=!0}getOrderById(e){this._orderService.getOrderById(e).subscribe(a=>{a.success&&this.form.patchValue({id:a.data?.id,clientId:a.data?.client?.id,sendDate:a.data?.sendDate,loadingLocation:a.data?.loadingLocation,deliveryLocation:a.data?.deliveryLocation,selectedLocations:[a.data?.customsPlaceLocation?"customsPlaceLocation":null,a.data?.customsClearancePlaceLocation?"customsClearancePlaceLocation":null,a.data?.additionalLoadingLocation?"additionalLoadingLocation":null,a.data?.additionalDeliveryLocation?"additionalDeliveryLocation":null].filter(r=>null!==r),customsPlaceLocation:a.data?.customsPlaceLocation,customsClearancePlaceLocation:a.data?.customsClearancePlaceLocation,additionalLoadingLocation:a.data?.additionalLoadingLocation,additionalDeliveryLocation:a.data?.additionalDeliveryLocation,isUrgent:a.data?.isUrgent,isTwoDays:a.data?.isTwoDays,isAdr:a.data?.isAdr,isCarnetTir:a.data?.isCarnetTir,isGlonas:a.data?.isGlonas,isParanom:a.data?.isParanom,offeredPrice:a.data?.offeredPrice,offeredPriceCurrencyId:a.data?.offeredPriceCurrency.id,inAdvancePrice:a.data?.inAdvancePrice,inAdvancePriceCurrencyId:a.data?.inAdvancePriceCurrency.id,paymentMethod:a.data?.paymentMethod,isSafeTransaction:a.data?.isSafeTransaction,transportKindIds:a.data?.transportKinds,transportTypeIds:a.data?.transportTypes,refrigeratorFrom:a.data?.refrigeratorFrom,refrigeratorTo:a.data?.refrigeratorTo,refrigeratorCount:a.data?.refrigeratorCount,isHook:a.data?.isHook,cargoTypeId:a.data?.cargoType,cargoWeight:a.data?.cargoWeight,cargoLength:a.data?.cargoLength,cargoWidth:a.data?.cargoWidth,cargoHeight:a.data?.cargoHeight,cubature:a.data?.cubature,cargoPackageId:a.data?.cargoPackage,loadingMethodId:a.data?.loadingMethod})})}ngOnInit(){this.form=this.formBuilder.group({id:[null],clientId:[null],sendDate:[null],loadingLocation:[null],deliveryLocation:[null],selectedLocations:[[]],customsPlaceLocation:[null],customsClearancePlaceLocation:[null],additionalLoadingLocation:[null],additionalDeliveryLocation:[null],isUrgent:[!0],isTwoDays:[!1],isAdr:[!1],isCarnetTir:[!1],isGlonas:[!1],isParanom:[!1],offeredPrice:[null],offeredPriceCurrencyId:[null],inAdvancePrice:[0],inAdvancePriceCurrencyId:[null],paymentMethod:["cash"],isSafeTransaction:[!1],transportKindIds:[null,l.kI.required],transportTypeIds:[null,l.kI.required],refrigeratorFrom:[null],refrigeratorTo:[null],refrigeratorCount:[null],isHook:[null],cargoTypeId:[null,l.kI.required],cargoWeight:[null,l.kI.required],cargoLength:[null],cargoWidth:[null],cargoHeight:[null],cubature:[null],cargoPackageId:[null],loadingMethodId:[null]}),this.changeValue(),(0,k.D)({currencies:this._typesService.getCurrencies(),cargoTypes:this._typesService.getCargoTypes(),transportTypes:this._typesService.getTransportTypes(),packagesTypes:this._typesService.getPackages(),cargoLoadingMethods:this._typesService.getCargoLoadingMethod(),transportKinds:this._typesService.getTransportKinds(),users:this._clientService.getAll()}).subscribe({next:e=>{this.currencies=e.currencies.data,this.cargoTypes=e.cargoTypes.data,this.transportTypes=e.transportTypes.data,this.packagesTypes=e.packagesTypes.data,this.cargoLoadingMethods=e.cargoLoadingMethods.data,this.transportKinds=e.transportKinds.data,this.users=e.users,this.form.patchValue({offeredPriceCurrencyId:this.currencies[0].id,inAdvancePriceCurrencyId:this.currencies[0].id})},error:e=>{console.error("Error fetching currencies and cargo types:",e)}}),this.form.get("clientId").valueChanges.pipe((0,E.b)(300),(0,Y.w)(e=>this._clientService.get(e))).subscribe(e=>{e.success&&(this.clientInfo=e.data)})}trackByFn(e){return e.id}compareFn(e,a){if(e&&a)return e===a.id}compareFin(e,a){if(e&&a)return e===a}setIds(e){return e.map(a=>a.id)}setId(e){return e.id}createOrder(){this.form.get("id").value&&this.form.patchValue({transportKindIds:this.setIds(this.form.get("transportKindIds").value),transportTypeIds:this.setIds(this.form.get("transportTypeIds").value),cargoTypeId:this.setId(this.form.get("cargoTypeId").value),cargoPackageId:this.setId(this.form.get("cargoPackageId").value),loadingMethodId:this.setId(this.form.get("loadingMethodId").value)}),this.form.value.id?this._orderService.updateOrder(this.form.value).subscribe(e=>{e.success&&(this.dialog.closeAll(),this.toastr.success("\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"))}):this._orderService.createOrder(this.form.value).subscribe(e=>{e.success&&(this.dialog.closeAll(),this.toastr.success("\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d"))})}nextStep(){this.currentStep<3&&this.currentStep++}previousStep(){this.currentStep>1&&this.currentStep--}changeValue(){this.form.get("isUrgent").valueChanges.subscribe(e=>{e&&this.form.get("isTwoDays").setValue(!1)}),this.form.get("isTwoDays").valueChanges.subscribe(e=>{e&&this.form.get("isUrgent").setValue(!1)}),this.form.get("isSafeTransaction").valueChanges.subscribe(e=>{e&&this.agreementModal()}),this.form.get("transportKindIds").valueChanges.subscribe(e=>{if(1==e.length){let a=this.transportKinds.find(r=>r.id==e);this.isAutotransport=a?.name?.includes("\u0410\u0432\u0442\u043e\u0432\u043e\u0437"),this.isRefrigerator=a?.name?.includes("\u0420\u0435\u0444\u0440\u0435\u0436\u0435\u0440\u0430\u0442\u043e\u0440"),this.isCistern=a?.name?.includes("\u0426\u0438\u0441\u0442\u0435\u0440\u043d\u0430"),this.isContainer=a?.name?.includes("\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432\u043e\u0437")}else e.forEach(a=>{let r=this.transportKinds.find(u=>u.id==a);this.isAutotransport=this.isAutotransport||r?.name?.includes("\u0410\u0432\u0442\u043e\u0432\u043e\u0437"),this.isRefrigerator=this.isRefrigerator||r?.name?.includes("\u0420\u0435\u0444\u0440\u0435\u0436\u0435\u0440\u0430\u0442\u043e\u0440"),this.isCistern=this.isCistern||r?.name?.includes("\u0426\u0438\u0441\u0442\u0435\u0440\u043d\u0430"),this.isContainer=this.isContainer||r?.name?.includes("\u041a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u0432\u043e\u0437")})})}findCity(e){try{const a=e.target.value.toString().trim().toLowerCase();a.length>=2&&(this.viewText=!0,this._countryService.findCity(a).subscribe(r=>{this.findList=r}))}catch(a){console.error("Error fetching city data:",a)}}closeModal(){this.dialogRef.close()}agreementModal(){this.dialog.open(M,{autoFocus:!1,disableClose:!0,width:"600px"}).afterClosed().subscribe(a=>{"close"===a&&this.form.get("isSafeTransaction")?.setValue(!1)})}getDynamicLabel(e){switch(e){case"customsPlaceLocation":return"\u041c\u0435\u0441\u0442\u043e \u0437\u0430\u0442\u0430\u043c\u043e\u0436\u043a\u0438";case"customsClearancePlaceLocation":return"\u041c\u0435\u0441\u0442\u043e \u0440\u0430\u0441\u0442\u0430\u043c\u043e\u0436\u043a\u0438";case"additionalLoadingLocation":case"additionalDeliveryLocation":return"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u043e\u0433\u0440\u0443\u0437\u043a\u0438";default:return null}}onCheckboxChange(e){this.isRefrigeratorMode=e.checked}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(s.so),t.Y36(l.qu),t.Y36(N),t.Y36(J.K),t.Y36(D.y),t.Y36(P.T),t.Y36(B._W),t.Y36(s.uw),t.Y36(s.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["create-order"]],standalone:!0,features:[t.jDz],decls:26,vars:16,consts:[[1,"flex","justify-between"],[4,"ngIf"],["class","cursor-pointer","svgIcon","heroicons_outline:arrow-long-left",3,"click",4,"ngIf"],["svgIcon","heroicons_outline:x-mark",1,"cursor-pointer",3,"click"],[1,"flex","items-center","justify-center","gap-1","mb-5"],[1,"stepper-item","active"],["svgIcon","heroicons_outline:arrow-long-right",1,"step-arrow"],[1,"stepper-item"],[1,"font-bold","text-3xl","flex","justify-center"],[1,"mat-typography","m-auto","px-3"],[1,"mt-8","w-full",3,"formGroup"],["align","center"],["class","fuse-mat-button-large  w-full mt-6","mat-flat-button","",3,"disabled","color","click",4,"ngIf"],["svgIcon","heroicons_outline:arrow-long-left",1,"cursor-pointer",3,"click"],[1,"grid","sm:grid-cols-1","gap-4"],[1,"flex-auto","gt-xs:pr-3","w-1/2"],["matIconSuffix","",3,"for"],["matInput","","readonly","","formControlName","sendDate",3,"matDatepicker"],["picker",""],[1,"grid","sm:grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex-auto","gt-xs:pr-3","w-full"],["matInput","","formControlName","loadingLocation"],["matSuffix","",1,"icon-size-5",3,"svgIcon"],["type","text","matInput","","formControlName","deliveryLocation"],["multiple","","formControlName","selectedLocations"],["value","customsPlaceLocation"],["value","customsClearancePlaceLocation"],["value","additionalLoadingLocation"],["value","additionalDeliveryLocation"],["matInput","","formControlName","clientId"],["class","flex-auto gt-xs:pr-3 w-full",4,"ngIf"],[1,"grid","grid-cols-2"],["class","flex-auto gt-xs:pr-3 md:w-72 sm:w-full",4,"ngFor","ngForOf"],[1,"flex","flex-col"],["formControlName","isAdr"],["formControlName","isCarnetTir"],["formControlName","isGlonas"],["formControlName","isParanom"],["matInput","",3,"value"],[1,"flex-auto","gt-xs:pr-3","md:w-72","sm:w-full"],["type","text","matInput","",3,"formControlName"],[1,"flex","gap-2"],[1,"flex-auto","md:w-72","sm:w-full"],["type","number","matInput","","formControlName","offeredPrice"],["matPrefix","","formControlName","offeredPriceCurrencyId"],[3,"value",4,"ngFor","ngForOf"],["type","number","matInput","","formControlName","inAdvancePrice"],["matPrefix","","formControlName","inAdvancePriceCurrencyId"],["formControlName","paymentMethod",3,"compareWith"],["value","cash"],["value","cashless"],["formControlName","isSafeTransaction",1,"flex-auto","md:w-72","sm:w-full"],[3,"value"],["formControlName","transportTypeIds","multiple","",3,"compareWith"],["formControlName","transportKindIds","multiple","",3,"compareWith"],["class","flex gap-2",4,"ngIf"],["class","flex items-center gap-4",4,"ngIf"],["formControlName","cargoTypeId",3,"compareWith"],[3,"label",4,"ngFor","ngForOf","ngForTrackBy"],["type","number","matInput","","formControlName","cargoWeight"],["type","number","matInput","","formControlName","cubature"],[1,"flex-auto"],[1,"text-[#1e293b]","font-medium","dark:text-white"],[1,"flex","items-baseline","gap-2"],["type","number","matInput","","formControlName","cargoLength","placeholder","\u0414\u043b\u0438\u043d\u0430"],["type","number","matInput","","formControlName","cargoWidth","placeholder","\u0428\u0438\u0440\u0438\u043d\u0430"],["type","number","matInput","","formControlName","cargoHeight","placeholder","\u0412\u044b\u0441\u043e\u0442\u0430"],["formControlName","loadingMethodId",3,"compareWith"],["formControlName","cargoPackageId",3,"compareWith"],["type","number","matInput","","formControlName","refrigeratorCount"],[3,"checked","change"],["formControlName","isHook"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","w-full"],["type","number","min","-10","max","24","matInput","","formControlName","refrigeratorFrom"],["type","number","max","25","min","0","matInput","","formControlName","refrigeratorTo"],["type","number","matInput","","formControlName","cisternVolume"],["formControlName","containerVolume",3,"value"],[3,"label"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"disabled","color","click"],[3,"diameter","mode",4,"ngIf"],[3,"diameter","mode"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0),t.YNc(1,j,1,0,"div",1),t.YNc(2,K,1,0,"mat-icon",2),t.TgZ(3,"mat-icon",3),t.NdJ("click",function(){return r.closeModal()}),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5)(6,"span"),t._uU(7,"1"),t.qZA()(),t._UZ(8,"mat-icon",6),t.TgZ(9,"div",7)(10,"span"),t._uU(11,"2"),t.qZA()(),t._UZ(12,"mat-icon",6),t.TgZ(13,"div",7)(14,"span"),t._uU(15,"3"),t.qZA()()(),t.TgZ(16,"div",8),t._uU(17,"\u0420\u0410\u0417\u041c\u0415\u0429\u0415\u041d\u0418\u0415 \u0413\u0420\u0423\u0417\u0410"),t.qZA(),t.TgZ(18,"mat-dialog-content",9)(19,"form",10),t.YNc(20,$,52,10,"div",1),t.YNc(21,z,25,3,"div",1),t.YNc(22,st,52,16,"div",1),t.qZA()(),t.TgZ(23,"mat-dialog-actions",11),t.YNc(24,pt,3,4,"button",12),t.YNc(25,_t,3,4,"button",12),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",1==r.currentStep),t.xp6(1),t.Q6J("ngIf",1!=r.currentStep),t.xp6(6),t.ekj("step-arrow-active",2===r.currentStep||3===r.currentStep),t.xp6(1),t.ekj("active",2===r.currentStep||3===r.currentStep),t.xp6(3),t.ekj("step-arrow-active",3===r.currentStep),t.xp6(1),t.ekj("active",3===r.currentStep),t.xp6(6),t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("ngIf",1==r.currentStep),t.xp6(1),t.Q6J("ngIf",2==r.currentStep),t.xp6(1),t.Q6J("ngIf",3==r.currentStep),t.xp6(2),t.Q6J("ngIf",3!==r.currentStep),t.xp6(1),t.Q6J("ngIf",3==r.currentStep))},dependencies:[C.O5,C.ax,A.p9,A.oG,Z.y4,Z.Ot,_.LD,m.KE,m.hX,m.qo,m.R9,_.gD,b.ey,b.Nv,f.c,f.Nt,m.lN,g.Ps,g.Hw,l.u5,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.qQ,l.Fd,l.UX,l.sg,l.u,h.FA,h.Mq,h.hl,h.nW,I.Bb,s.Is,s.xY,s.H8,p.ot,p.lW,y.Cq,y.Ou],styles:[".active{background-color:#f97c00!important;box-shadow:0 0 5px #f97c00!important}.stepper-item{position:relative;width:50px;height:50px;border-radius:50%;background-color:#cdcdcd;box-shadow:0 0 5px #c0bebb}.stepper-item span{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-weight:700}.step-arrow-active{color:#f97c00}.prefix-select-container{display:flex;align-items:center}.prefix{margin-right:8px}\n"],encapsulation:2,data:{animation:L.L}})}return o})();var ht=i(3649),Q=i(1848);const Zt=function(){return[55.751952,37.600739]};let Ct=(()=>{class o{constructor(e,a){this.data=e,this._clientService=a,this.assign=!1,this.getClient(e)}ngOnInit(){}getClient(e){this._clientService.get(e).subscribe(a=>{this.client=a.data})}submit(){this.assign=!this.assign}saveNewDriver(){}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(s.WI),t.Y36(D.y))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-order-detail"]],standalone:!0,features:[t.jDz],decls:106,vars:57,consts:[[1,"flex","justify-between","items-center"],["mat-dialog-title","",1,"font-bold","leading-5","text-3xl"],["mat-icon-button","","mat-dialog-close",""],["aria-label","Close dialog"],[1,"h-full"],[1,"h-60","w-full","mt-4"],[3,"center","zoom"],[1,"max-w-md","mx-auto","p-4","mt-3","bg-white","rounded-lg","shadow-md"],[1,"mb-5"],[1,"text-2xl","leading-4","font-bold"],[1,"grid","grid-cols-2","gap-4"],[1,"text-xl","leading-4","mb-1"],[1,"font-bold"],[1,"flex"],[1,"ml-auto","p-4"],["mat-flat-button","","mat-dialog-close","","tabindex","-1",1,"fuse-mat-button","mx-2",3,"color"],["mat-flat-button","","type","button",1,"fuse-mat-button","text-white",3,"color","click"],[1,"max-w-md","mx-auto",3,"hidden"],[1,"w-full"],["id","name","matInput","","placeholder","\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c",3,"ngModel","ngModelChange"],["id","name","matInput","","placeholder","\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430",3,"ngModel","ngModelChange"],[1,"flex","justify-end","mt-4"],["mat-flat-button","",1,"fuse-mat-button","text-white",3,"color","click"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2),t.ALo(3,"transloco"),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon",3),t._uU(6,"close"),t.qZA()()(),t.TgZ(7,"mat-dialog-content",4)(8,"div",5),t._UZ(9,"ya-map",6),t.qZA(),t.TgZ(10,"div",7)(11,"div",8)(12,"h2",9),t._uU(13),t.ALo(14,"transloco"),t.qZA()(),t.TgZ(15,"div",10)(16,"div")(17,"p",11),t._uU(18),t.ALo(19,"transloco"),t.qZA(),t.TgZ(20,"p",12),t._uU(21,"#2459"),t.qZA()(),t.TgZ(22,"div")(23,"p",11),t._uU(24),t.ALo(25,"transloco"),t.qZA(),t.TgZ(26,"p",12),t._uU(27,"\u0411\u0440\u0430\u0437\u0438\u043b\u0438\u044f"),t.qZA()(),t.TgZ(28,"div")(29,"p",11),t._uU(30),t.ALo(31,"transloco"),t.qZA(),t.TgZ(32,"p",12),t._uU(33,"\u0416\u0438\u0440\u044b \u0438 \u043c\u0430\u0441\u043b\u0430"),t.qZA()(),t.TgZ(34,"div")(35,"p",11),t._uU(36),t.ALo(37,"transloco"),t.qZA(),t.TgZ(38,"p",12),t._uU(39,"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),t.qZA()(),t.TgZ(40,"div")(41,"p",11),t._uU(42),t.ALo(43,"transloco"),t.qZA(),t.TgZ(44,"p",12),t._uU(45,"\u0434:10\u0441\u043c. \u0428: 20\u0441\u043c. \u0412:10\u0441\u043c."),t.qZA()(),t.TgZ(46,"div")(47,"p",11),t._uU(48),t.ALo(49,"transloco"),t.qZA(),t.TgZ(50,"p",12),t._uU(51,"\u0420\u0430\u0444\u0430\u044d\u043b\u044c \u0420\u043e\u0439\u0442\u043c\u0430\u043d"),t.qZA()(),t.TgZ(52,"div")(53,"p",11),t._uU(54),t.ALo(55,"transloco"),t.qZA(),t.TgZ(56,"p",12),t._uU(57,"10 \u043a\u0433"),t.qZA()(),t.TgZ(58,"div")(59,"p",11),t._uU(60),t.ALo(61,"transloco"),t.qZA(),t.TgZ(62,"p",12),t._uU(63,"200$"),t.qZA()(),t.TgZ(64,"div")(65,"p",11),t._uU(66),t.ALo(67,"transloco"),t.qZA(),t.TgZ(68,"p",12),t._uU(69,"03 \u043d\u043e\u044f\u0431\u0440\u044f 2023 \u0432 23:59"),t.qZA()(),t.TgZ(70,"div")(71,"p",11),t._uU(72),t.ALo(73,"transloco"),t.qZA(),t.TgZ(74,"p",12),t._uU(75,"03 \u043d\u043e\u044f\u0431\u0440\u044f 2023 \u0432 23:59"),t.qZA()(),t.TgZ(76,"div")(77,"p",11),t._uU(78),t.ALo(79,"transloco"),t.qZA(),t.TgZ(80,"p",12),t._uU(81,"\u0421\u043e\u0437\u0434\u0430\u043d"),t.qZA()()()()(),t.TgZ(82,"mat-dialog-actions",13)(83,"div",14)(84,"button",15),t._uU(85),t.ALo(86,"transloco"),t.qZA(),t.TgZ(87,"button",16),t.NdJ("click",function(){return r.submit()}),t._uU(88),t.ALo(89,"transloco"),t.qZA()()(),t.TgZ(90,"div",17)(91,"div",10)(92,"div")(93,"mat-form-field",18)(94,"mat-label"),t._uU(95,"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"),t.qZA(),t.TgZ(96,"input",19),t.NdJ("ngModelChange",function(c){return r.driverid=c}),t.qZA()()(),t.TgZ(97,"div")(98,"mat-form-field",18)(99,"mat-label"),t._uU(100,"\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"),t.qZA(),t.TgZ(101,"input",20),t.NdJ("ngModelChange",function(c){return r.price=c}),t.qZA()()()(),t.TgZ(102,"div",21)(103,"button",22),t.NdJ("click",function(){return r.saveNewDriver()}),t._uU(104),t.ALo(105,"transloco"),t.qZA()()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,24,"about_driver")),t.xp6(7),t.Q6J("center",t.DdM(56,Zt))("zoom",12),t.xp6(4),t.Oqu(t.lcZ(14,26,"information")),t.xp6(5),t.hij(" ",t.lcZ(19,28,"order_id"),""),t.xp6(6),t.hij(" ",t.lcZ(25,30,"order_dispatch_point"),""),t.xp6(6),t.hij(" ",t.lcZ(31,32,"cargo_type "),""),t.xp6(6),t.hij(" ",t.lcZ(37,34,"type_transport"),""),t.xp6(6),t.hij(" ",t.lcZ(43,36,"cargo_size"),""),t.xp6(6),t.hij(" ",t.lcZ(49,38,"user"),""),t.xp6(6),t.Oqu(t.lcZ(55,40,"cargo_weight")),t.xp6(6),t.hij(" ",t.lcZ(61,42,"price"),""),t.xp6(6),t.Oqu(t.lcZ(67,44,"order_date")),t.xp6(6),t.Oqu(t.lcZ(73,46,"order_scheduled")),t.xp6(6),t.hij(" ",t.lcZ(79,48,"status"),""),t.xp6(6),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(86,50,"cancel_order"),""),t.xp6(2),t.Q6J("color","primary"),t.xp6(1),t.hij(" ",t.lcZ(89,52,"assign_driver")," "),t.xp6(2),t.Q6J("hidden",!r.assign),t.xp6(6),t.Q6J("ngModel",r.driverid),t.xp6(5),t.Q6J("ngModel",r.price),t.xp6(2),t.Q6J("color","warn"),t.xp6(1),t.hij(" ",t.lcZ(105,54,"assign_driver")," "))},dependencies:[g.Ps,g.Hw,m.lN,m.KE,m.hX,f.c,f.Nt,_.LD,l.u5,l.Fj,l.JJ,l.On,l.UX,Q.te,Q.k0,s.Is,s.ZT,s.uh,s.xY,s.H8,Z.y4,Z.Ot,p.ot,p.lW,p.RK,ht.AV],styles:[".mat-mdc-dialog-container .mdc-dialog__surface{border-radius:6px 0 0 6px!important;padding:6px!important}.mat-mdc-dialog-content{max-height:83vh;scrollbar-color:#888 #eee;scrollbar-width:thin;padding:0!important}.mdc-dialog__title{padding:0 11px 9px!important}.mat-dialog-content::-webkit-scrollbar{width:2px}.mat-dialog-content::-webkit-scrollbar-thumb{background-color:#888;border-radius:5px}.mat-dialog-content::-webkit-scrollbar-track{background-color:#eee}.yandex{height:calc(100% - 135px)}\n"],encapsulation:2})}return o})();var O=i(2611),Tt=i(877),xt=i(8236);function vt(o,n){if(1&o&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function At(o,n){if(1&o&&(t.TgZ(0,"mat-option",43),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function yt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1," No "),t.qZA())}function qt(o,n){if(1&o&&(t.TgZ(0,"mat-cell",45),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.hij(" ",e+1," ")}}function bt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1," ID "),t.qZA())}function Ot(o,n){if(1&o&&(t.TgZ(0,"mat-cell",45),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.id," ")}}function Ut(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"from")))}function It(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.loadingLocation," ")}}function Lt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"where")))}function Nt(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.deliveryLocation," ")}}function Jt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",46),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"status"),""))}function Dt(o,n){if(1&o&&(t.TgZ(0,"mat-cell")(1,"div",47)(2,"span"),t._uU(3),t.qZA()()()),2&o){const e=n.$implicit,a=t.oxw();t.xp6(1),t.Tol(a.returnClassStatusOrder(e.cargoStatus.name)),t.xp6(2),t.Oqu(a.statusOrderCheck(e.cargoStatus.name))}}function wt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cargo_type")))}function Qt(o,n){if(1&o&&(t.TgZ(0,"mat-cell")(1,"div",48),t._uU(2),t.qZA()()),2&o){const e=n.$implicit;t.xp6(2),t.Oqu(e.cargoType.name)}}function Ft(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"cargo_type")))}function Mt(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function kt(o,n){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,Mt,3,1,"span",50),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.transportTypes)}}function Et(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t.YNc(1,kt,2,1,"span",49),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Q6J("ngIf",e.transportTypes)}}function Yt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"secure_transaction")))}function St(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.Oqu(e.isSafe?"\u0414\u0430":"\u041d\u0435\u0442")}}function Pt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"price")))}function Bt(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.offeredPrice," ")}}function jt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"shipment_date")))}function Kt(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit,a=t.oxw();t.xp6(1),t.hij(" ",t.xi3(2,1,e.isUrgent?a.addTwoDays(e.createdAt):e.createdAt,"dd.MM.YYYY")," ")}}function Wt(o,n){1&o&&(t.TgZ(0,"mat-header-cell",44),t._uU(1),t.ALo(2,"transloco"),t.qZA()),2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"client")))}function Ht(o,n){if(1&o&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.deliveryLocation," ")}}function Rt(o,n){1&o&&t._UZ(0,"mat-header-cell")}function $t(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-cell")(1,"div",51)(2,"button",52),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"mat-menu",null,53)(7,"button",54),t.NdJ("click",function(){const u=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.edit(u))}),t.TgZ(8,"mat-icon"),t._uU(9,"edit"),t.qZA(),t._uU(10),t.ALo(11,"transloco"),t.qZA(),t.TgZ(12,"button",54),t.NdJ("click",function(){const u=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.cancel(u))}),t.TgZ(13,"mat-icon"),t._uU(14,"cancel"),t.qZA(),t._uU(15),t.ALo(16,"transloco"),t.qZA()()()()}if(2&o){const e=t.MAs(6);t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(8),t.hij(" ",t.lcZ(11,3,"edit")," "),t.xp6(5),t.hij(" ",t.lcZ(16,5,"cancel")," ")}}function Gt(o,n){1&o&&t._UZ(0,"mat-header-row")}function Vt(o,n){1&o&&t._UZ(0,"mat-row")}const zt=function(){return[10,20,50,100,200]},Xt=[{path:"",component:(()=>{class o{constructor(e,a,r,u){this.orderService=e,this.authService=a,this.dialog=r,this._typeService=u,this.isLoading=!1,this.displayedColumns=["index","id","sendLocation","cargoDeliveryLocation","status","date_send","offeredPrice","secure_transaction","type_cargo","transport_type","client","actions"],this.transportKinds=[],this.transportTypes=[],this.filters={orderId:"",statusId:"",loadingLocation:"",deliveryLocation:"",transportKindId:"",transportTypeId:"",createdBy:"",createdAt:"",sendDate:"",merchantOrder:""},this.pageParams={page:1,limit:10,perPage:10,sortBy:"id",sortType:"asc"},this.dataSource=new d.by([])}ngOnInit(){this.currentUser=(0,F.o)(this.authService.accessToken),this.getOrders(),this._typeService.getTransportKinds().subscribe(e=>{this.transportKinds=e.data}),this._typeService.getTransportTypes().subscribe(e=>{this.transportTypes=e.data})}detail(){this.dialog.open(Ct,{width:"500px",height:"100vh",autoFocus:!1,position:{top:"0",right:"0"},maxHeight:"100%"}).afterClosed().subscribe(()=>{this.getOrders(this.pageParams)})}clearFilters(){this.filters={orderId:"",statusId:"",loadingLocation:"",deliveryLocation:"",transportKindId:"",transportTypeId:"",createdBy:"",createdAt:"",sendDate:"",merchantOrder:""}}filterDrivers(){}onPageChange(e){this.pageParams.limit=e.pageSize,this.pageParams.perPage=e.pageSize,this.pageParams.page=e.pageIndex,this.getOrders(this.pageParams)}getOrders(e){this.isLoading=!0,this.orderService.getOrders(Object.assign(this.filters,this.pageParams)).subscribe(a=>{a&&a.success?(this.isLoading=!1,this.dataSource=a.data):(this.isLoading=!1,this.dataSource.data=[])}),this.isLoading=!1}addTwoDays(e){const a=new Date(e);return a.setDate(a.getDate()+2),a}statusOrderCheck(e){switch(e){case"waiting":return"\u041e\u0436\u0438\u0434\u0430\u044e\u0449\u0438\u0439";case 1:return"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f";case 2:return"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d";case 3:return"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d";case 4:return"\u041e\u0442\u043c\u0435\u043d\u0435\u043d";default:return"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}}returnClassStatusOrder(e){switch(e){case"waiting":return"status-order-blue";case 1:return"status-order-yellow";case 2:return"status-order-green";case 3:return"status-order-info";case 4:return"status-order-red";default:return"status-order"}}cancel(e){this.orderService.cancelOrder(e.id).subscribe(a=>{a&&a.success&&this.getOrders(this.pageParams)})}edit(e){this.dialog.open(w,{minWidth:"50vw",maxWidth:"70vw",minHeight:"50vh",maxHeight:"95vh",autoFocus:!1,disableClose:!0,data:e}).afterClosed().subscribe(r=>{this.getOrders(this.pageParams)})}createOrderModal(){this.dialog.open(w,{minWidth:"50vw",maxWidth:"70vw",minHeight:"50vh",maxHeight:"95vh",autoFocus:!1,disableClose:!0}).afterClosed().subscribe(a=>{this.getOrders(this.pageParams)})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(N),t.Y36(xt.e),t.Y36(s.uw),t.Y36(J.K))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders"]],viewQuery:function(a,r){if(1&a&&t.Gf(v.NW,5),2&a){let u;t.iGM(u=t.CRH())&&(r.paginator=u.first)}},standalone:!0,features:[t.jDz],decls:88,vars:43,consts:[[1,"flex","flex-col","flex-auto"],[1,"flex-auto","border-t"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"flex","items-center","ml-6"],["mat-flat-button","",3,"color","click"],[1,"flex","items-baseline","flex-wrap"],["color","accent",1,"w-50","px-1"],["matInput","","name","ID",3,"placeholder","ngModel","ngModelChange"],["matInput","","name","StatusID",3,"placeholder","ngModel","ngModelChange"],["matInput","","placeholder","\u041c\u0435\u0441\u0442\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0433\u0440\u0443\u0437\u0430","name","loadingLocation",3,"ngModel","ngModelChange"],["matInput","","placeholder","\u041c\u0435\u0441\u0442\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u0433\u0440\u0443\u0437\u0430","name","deliveryLocation",3,"ngModel","ngModelChange"],["name","transportTypeId",3,"placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","transportKindId",3,"placeholder","ngModel","ngModelChange"],["name","merchantOrder",3,"placeholder","ngModel","ngModelChange"],["value","true"],["value","false"],[1,"px-1"],["mat-flat-button","","color","warn",1,"",3,"click"],["mat-flat-button","","color","warn",3,"click"],[1,"mt-4","h-100"],["matSort","",1,"table",3,"dataSource"],["matColumnDef","index"],["class","font-bold",4,"matHeaderCellDef"],["class","index-column",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","sendLocation"],[4,"matCellDef"],["matColumnDef","cargoDeliveryLocation"],["matColumnDef","status"],["class","font-bold","mat-sort-header","","sortActionDescription","Sort by status",4,"matHeaderCellDef"],["matColumnDef","type_cargo"],["matColumnDef","transport_type"],["matColumnDef","secure_transaction"],["matColumnDef","offeredPrice"],["matColumnDef","date_send"],["matColumnDef","client"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"showFirstLastButtons","pageSizeOptions"],[3,"value"],[1,"font-bold"],[1,"index-column"],["mat-sort-header","","sortActionDescription","Sort by status",1,"font-bold"],[1,"status-badge"],[1,"truncate"],[4,"ngIf"],[4,"ngFor","ngForOf"],["fxFlex","row","fxLayoutAlign","end center"],["mat-icon-button","","aria-label","More",3,"matMenuTriggerFor","click"],["moreMenu","matMenu"],["mat-menu-item","","color","accent",3,"click"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),t._uU(5,"\u0413\u0440\u0443\u0437\u044b"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return r.createOrderModal()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA(),t._uU(10," \u0420\u0430\u0437\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0433\u0440\u0443\u0437 "),t.qZA()()(),t.TgZ(11,"div",6)(12,"mat-form-field",7)(13,"input",8),t.NdJ("ngModelChange",function(c){return r.filters.orderId=c}),t.ALo(14,"transloco"),t.qZA()(),t.TgZ(15,"mat-form-field",7)(16,"input",9),t.NdJ("ngModelChange",function(c){return r.filters.statusId=c}),t.ALo(17,"transloco"),t.qZA()(),t.TgZ(18,"mat-form-field",7)(19,"input",10),t.NdJ("ngModelChange",function(c){return r.filters.loadingLocation=c}),t.qZA()(),t.TgZ(20,"mat-form-field",7)(21,"input",11),t.NdJ("ngModelChange",function(c){return r.filters.deliveryLocation=c}),t.qZA()(),t.TgZ(22,"mat-form-field",7)(23,"mat-select",12),t.NdJ("ngModelChange",function(c){return r.filters.transportTypeId=c}),t.ALo(24,"transloco"),t.YNc(25,vt,2,2,"mat-option",13),t.qZA()(),t.TgZ(26,"mat-form-field",7)(27,"mat-select",14),t.NdJ("ngModelChange",function(c){return r.filters.transportKindId=c}),t.ALo(28,"transloco"),t.YNc(29,At,2,2,"mat-option",13),t.qZA()(),t.TgZ(30,"mat-form-field",7)(31,"mat-select",15),t.NdJ("ngModelChange",function(c){return r.filters.merchantOrder=c}),t.ALo(32,"transloco"),t.TgZ(33,"mat-option",16),t._uU(34),t.ALo(35,"transloco"),t.qZA(),t.TgZ(36,"mat-option",17),t._uU(37),t.ALo(38,"transloco"),t.qZA()()(),t.TgZ(39,"div",18)(40,"button",19),t.NdJ("click",function(){return r.clearFilters()}),t._uU(41),t.ALo(42,"transloco"),t.qZA()(),t.TgZ(43,"div",18)(44,"button",20),t.NdJ("click",function(){return r.getOrders()}),t._uU(45),t.ALo(46,"transloco"),t.qZA()()(),t.TgZ(47,"div",21)(48,"mat-table",22),t.ynx(49,23),t.YNc(50,yt,2,0,"mat-header-cell",24),t.YNc(51,qt,2,1,"mat-cell",25),t.BQk(),t.ynx(52,26),t.YNc(53,bt,2,0,"mat-header-cell",24),t.YNc(54,Ot,2,1,"mat-cell",25),t.BQk(),t.ynx(55,27),t.YNc(56,Ut,3,3,"mat-header-cell",24),t.YNc(57,It,2,1,"mat-cell",28),t.BQk(),t.ynx(58,29),t.YNc(59,Lt,3,3,"mat-header-cell",24),t.YNc(60,Nt,2,1,"mat-cell",28),t.BQk(),t.ynx(61,30),t.YNc(62,Jt,3,3,"mat-header-cell",31),t.YNc(63,Dt,4,3,"mat-cell",28),t.BQk(),t.ynx(64,32),t.YNc(65,wt,3,3,"mat-header-cell",24),t.YNc(66,Qt,3,1,"mat-cell",28),t.BQk(),t.ynx(67,33),t.YNc(68,Ft,3,3,"mat-header-cell",24),t.YNc(69,Et,2,1,"mat-cell",28),t.BQk(),t.ynx(70,34),t.YNc(71,Yt,3,3,"mat-header-cell",24),t.YNc(72,St,2,1,"mat-cell",28),t.BQk(),t.ynx(73,35),t.YNc(74,Pt,3,3,"mat-header-cell",24),t.YNc(75,Bt,2,1,"mat-cell",28),t.BQk(),t.ynx(76,36),t.YNc(77,jt,3,3,"mat-header-cell",24),t.YNc(78,Kt,3,4,"mat-cell",28),t.BQk(),t.ynx(79,37),t.YNc(80,Wt,3,3,"mat-header-cell",24),t.YNc(81,Ht,2,1,"mat-cell",28),t.BQk(),t.ynx(82,38),t.YNc(83,Rt,1,0,"mat-header-cell",39),t.YNc(84,$t,17,7,"mat-cell",28),t.BQk(),t.YNc(85,Gt,1,0,"mat-header-row",40),t.YNc(86,Vt,1,0,"mat-row",41),t.qZA(),t._UZ(87,"mat-paginator",42),t.qZA()()()),2&a&&(t.xp6(7),t.Q6J("color","primary"),t.xp6(6),t.s9C("placeholder",t.lcZ(14,24,"ID")),t.Q6J("ngModel",r.filters.orderId),t.xp6(3),t.s9C("placeholder",t.lcZ(17,26,"StatusID")),t.Q6J("ngModel",r.filters.statusId),t.xp6(3),t.Q6J("ngModel",r.filters.loadingLocation),t.xp6(2),t.Q6J("ngModel",r.filters.deliveryLocation),t.xp6(2),t.s9C("placeholder",t.lcZ(24,28,"transport_type")),t.Q6J("ngModel",r.filters.transportTypeId),t.xp6(2),t.Q6J("ngForOf",r.transportTypes),t.xp6(2),t.s9C("placeholder",t.lcZ(28,30,"transport_cargo")),t.Q6J("ngModel",r.filters.transportKindId),t.xp6(2),t.Q6J("ngForOf",r.transportKinds),t.xp6(2),t.s9C("placeholder",t.lcZ(32,32,"merchant_order")),t.Q6J("ngModel",r.filters.merchantOrder),t.xp6(3),t.Oqu(t.lcZ(35,34,"merchant_order")),t.xp6(3),t.Oqu(t.lcZ(38,36,"no_merchant_order")),t.xp6(4),t.hij(" ",t.lcZ(42,38,"clear"),""),t.xp6(4),t.hij(" ",t.lcZ(46,40,"filter"),""),t.xp6(3),t.Q6J("dataSource",r.dataSource),t.xp6(37),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("showFirstLastButtons",!0)("pageSizeOptions",t.DdM(42,zt)))},dependencies:[Z.y4,Z.Ot,C.uU,g.Ps,g.Hw,h.FA,l.u5,l.Fj,l.JJ,l.On,l.UX,_.LD,m.KE,_.gD,b.ey,p.ot,p.lW,p.RK,C.ax,C.O5,d.p0,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,m.lN,f.c,f.Nt,O.JX,O.YE,O.nU,v.TU,v.NW,x.Tx,x.VK,x.OP,x.p6,Tt.rP],encapsulation:2})}return o})(),resolve:{}}]}}]);