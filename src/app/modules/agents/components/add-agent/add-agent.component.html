<div class="flex justify-between items-center">
    <p mat-dialog-title *ngIf="!edit" class="font-bold text-2xl uppercase">{{"add_admins"|transloco}}</p>
    <p mat-dialog-title *ngIf="edit" class="font-bold text-2xl uppercase">{{"edit_admins"|transloco}}</p>
    <button mat-icon-button mat-dialog-close>
        <mat-icon aria-label="Close dialog">close</mat-icon>
    </button>
</div>
<mat-dialog-content>
    <form [formGroup]="form">
        <div class="grid grid-cols-3 gap-4 px-3">
            
            <mat-form-field>
                <mat-label>{{ 'login' | transloco }}</mat-label>
                <input matInput placeholder="{{ 'login' | transloco }}" formControlName="username"
                    [ngClass]="{'is-invalid': f.username.errors}">
                <mat-error *ngIf="f.username.errors?.required">
                    {{ 'is_empty' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'password' | transloco }}</mat-label>
                <input matInput required placeholder="{{ 'password' | transloco }}" formControlName="password"
                    [ngClass]="{'is-invalid': f.password.errors}">
                <mat-error *ngIf="f.password.errors?.required">
                    {{ 'is_empty' | transloco }}
                </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'company_name' | transloco }}</mat-label>
                <input required matInput name="companyName" [ngClass]="{'is-invalid': f.companyName.errors}"
                    formControlName="companyName" placeholder="{{ 'company_name' | transloco }}" />
                    <mat-error *ngIf="f.companyName.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'legal_address' | transloco }}</mat-label>
                <input required matInput name="legalAddress" formControlName="legalAddress"
                    placeholder="{{ 'legal_address' | transloco }}" 
                    [ngClass]="{'is-invalid': f.legalAddress.errors}"
                    />
                    <mat-error *ngIf="f.legalAddress.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'actual_address' | transloco }}</mat-label>
                <input required matInput name="actualAddress" formControlName="actualAddress"
                    placeholder="{{ 'actual_address' | transloco }}" 
                    [ngClass]="{'is-invalid': f.actualAddress.errors}"
                    />
                    <mat-error *ngIf="f.actualAddress.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label> {{ 'director_first_name' | transloco }}</mat-label>
                <input required matInput name="supervisorFirstName" formControlName="supervisorFirstName"
                    placeholder="{{ 'director_first_name' | transloco }}" 
                    [ngClass]="{'is-invalid': f.supervisorFirstName.errors}"
                    />
                    <mat-error *ngIf="f.supervisorFirstName.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label> {{ 'director_last_name' | transloco }}</mat-label>
                <input required matInput name="supervisorLastName" formControlName="supervisorLastName"
                    placeholder="{{ 'director_last_name' | transloco }}" 
                    [ngClass]="{'is-invalid': f.supervisorLastName.errors}"
                    />
                    <mat-error *ngIf="f.supervisorLastName.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'inn' | transloco }}</mat-label>
                <input type="text" mask="999999999" matInput name="inn" formControlName="inn"
                    placeholder="{{ 'inn' | transloco }}" maxlength="9" required 
                    [ngClass]="{'is-invalid': f.inn.errors}"
                    />
                    <mat-error *ngIf="f.inn.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'oked' | transloco }}</mat-label>
                <input type="text" mask="99999" matInput name="oked" formControlName="oked"
                    placeholder="{{ 'oked' | transloco }}" maxlength="5" required 
                    [ngClass]="{'is-invalid': f.oked.errors}"
                    />
                    <mat-error *ngIf="f.oked.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label>{{ 'mfo' | transloco }}</mat-label>
                <input type="text" matInput name="mfo" formControlName="mfo" placeholder="{{ 'mfo' | transloco }}"
                    mask="99999" maxlength="5" required 
                    [ngClass]="{'is-invalid': f.mfo.errors}"
                    
                    />
                    <mat-error *ngIf="f.mfo.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label> {{ 'bank_name' | transloco }}</mat-label>
                <input matInput name="bankName" placeholder="{{ 'bank_name' | transloco }}" 
                         formControlName="bankName"  required  [ngClass]="{'is-invalid': f.bankName.errors}"
                    />
                    <mat-error *ngIf="f.bankName.errors?.required">
                        {{ 'is_empty' | transloco }}
                    </mat-error>
            </mat-form-field>

            <mat-form-field>
                <mat-label> {{ 'phone' | transloco }}</mat-label>
                <ngx-mat-intl-tel-input [cssClass]="'custom'" formControlName="phone" [preferredCountries]="['uz']"
                    [enablePlaceholder]="true" [enableSearch]="true" name="phone" #phone>
                </ngx-mat-intl-tel-input>
                
            </mat-form-field>

            <mat-form-field class="flex items-center">
                <mat-label class="text-xl">{{ 'registration_certificate' | transloco }} </mat-label>
                <input matInput placeholder="Upload" class="mr-2"
                    [value]="form.get('registrationCertificate')?.value?.name || ''"
                    formControlName="registrationCertificate"
                    [ngClass]="{'is-invalid': f.registrationCertificate.errors}">
                <label class=" text-white font-bold p-2 rounded-full cursor-pointer">
                    <mat-icon aria-label="Upload">cloud_upload</mat-icon>
                    <input type="file" (change)="onFileSelected($event, 'registration_certificate')"
                        formControlName="registrationCertificate" id="fileInput" style="display: none;">
                </label>
                <mat-error *ngIf="f.registrationCertificate.errors?.required">
                    {{ 'is_empty' | transloco }}
                </mat-error>
                <img *ngIf="form.get('registrationCertificate').value" [src]="getImageUrl('registrationCertificate')"
                    class="max-h-12 max-w-12" />
            </mat-form-field>

            <mat-form-field class="flex items-center">
                <mat-label class="text-xl">{{ 'passport_owner' | transloco }} </mat-label>
                <input matInput placeholder="Upload" class="mr-2" [value]="form.get('passportOwner')?.value?.name || ''"
                    formControlName="passportOwner" [ngClass]="{'is-invalid': f.passportOwner.errors}">
                <label class=" text-white font-bold p-2 rounded-full cursor-pointer">
                    <mat-icon aria-label="Upload">cloud_upload</mat-icon>
                    <input type="file" (change)="onFileSelected($event, 'passportOwner')"
                        formControlName="passportOwner" id="fileInput" style="display: none;">
                </label>
                <mat-error *ngIf="f.passportOwner.errors?.required">
                    {{ 'is_empty' | transloco }}
                </mat-error>
                <img *ngIf="form.get('passportOwner').value" [src]="getImageUrl('passportOwner')"
                    class="max-h-12 max-w-12" />
            </mat-form-field>
        </div>
    </form>
</mat-dialog-content>
<mat-dialog-actions class="flex">
    <div class="ml-auto p-4">
        <button mat-flat-button class="fuse-mat-button " [color]="'warn'" mat-dialog-close tabindex="-1">
            {{ 'cancel' | transloco }}</button>
        <button
            [ngClass]="{'fuse-mat-button text-white': form.invalid || form.pristine, 'fuse-mat-button ': !form.invalid && !form.pristine}"
            mat-flat-button [color]="'primary'" [disabled]="form.invalid || form.pristine" (click)="submit()">
            {{ 'save' | transloco }}
        </button>
    </div>
</mat-dialog-actions>